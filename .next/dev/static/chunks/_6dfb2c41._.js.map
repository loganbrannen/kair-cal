{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,uOAAO,EAAC,IAAA,iMAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/calendar-types.ts"],"sourcesContent":["export type DotColor = 1 | 2 | 3 | 4 | 5 | 6 | 7;\n\n// Day color codes - uses the same 7-color system as markers/dots\nexport type DayColorCode = 1 | 2 | 3 | 4 | 5 | 6 | 7 | null;\n\nexport const DAY_COLORS: Record<Exclude<DayColorCode, null>, {\n  label: string;\n  description: string;\n  bgClass: string;\n  bgClassSolid: string;\n  borderClass: string;\n}> = {\n  1: {\n    label: \"Focus\",\n    description: \"Deep work, important projects\",\n    bgClass: \"bg-dot-1/15\",\n    bgClassSolid: \"bg-dot-1\",\n    borderClass: \"border-dot-1/50\",\n  },\n  2: {\n    label: \"Joy\",\n    description: \"Celebrations, fun, special moments\",\n    bgClass: \"bg-dot-2/20\",\n    bgClassSolid: \"bg-dot-2\",\n    borderClass: \"border-dot-2/50\",\n  },\n  3: {\n    label: \"Health\",\n    description: \"Workouts, recovery, wellness\",\n    bgClass: \"bg-dot-3/15\",\n    bgClassSolid: \"bg-dot-3\",\n    borderClass: \"border-dot-3/50\",\n  },\n  4: {\n    label: \"Rest\",\n    description: \"Vacation, downtime, recharge\",\n    bgClass: \"bg-dot-4/20\",\n    bgClassSolid: \"bg-dot-4\",\n    borderClass: \"border-dot-4/50\",\n  },\n  5: {\n    label: \"Social\",\n    description: \"Family, friends, relationships\",\n    bgClass: \"bg-dot-5/15\",\n    bgClassSolid: \"bg-dot-5\",\n    borderClass: \"border-dot-5/50\",\n  },\n  6: {\n    label: \"Create\",\n    description: \"Making, building, creative work\",\n    bgClass: \"bg-dot-6/15\",\n    bgClassSolid: \"bg-dot-6\",\n    borderClass: \"border-dot-6/50\",\n  },\n  7: {\n    label: \"Review\",\n    description: \"Planning, reflection, admin\",\n    bgClass: \"bg-dot-7/20\",\n    bgClassSolid: \"bg-dot-7\",\n    borderClass: \"border-dot-7/50\",\n  },\n};\n\n// Consolidated: time block categories now use the 7-color system\nexport type TimeBlockCategory = \"focus\" | \"joy\" | \"health\" | \"rest\" | \"social\" | \"create\" | \"review\";\n\nexport interface TimeBlock {\n  id: string;\n  startTime: string; // HH:MM format\n  endTime: string;   // HH:MM format\n  title: string;\n  category: TimeBlockCategory;\n}\n\nexport interface ChecklistItem {\n  id: string;\n  text: string;\n  checked: boolean;\n}\n\nexport interface BulletItem {\n  id: string;\n  text: string;\n}\n\nexport interface LinkData {\n  url: string;\n  title?: string;\n  description?: string;\n}\n\nexport interface CodeData {\n  language: string;\n  code: string;\n}\n\nexport interface ContentBlock {\n  id: string;\n  type: \"text\" | \"checklist\" | \"bullets\" | \"code\" | \"link\" | \"divider\" | \"heading\";\n  content: string | ChecklistItem[] | BulletItem[] | CodeData | LinkData;\n}\n\n// Duration presets in minutes for quick time block creation\nexport const DURATION_PRESETS = [\n  { label: \"15m\", minutes: 15 },\n  { label: \"30m\", minutes: 30 },\n  { label: \"45m\", minutes: 45 },\n  { label: \"1h\", minutes: 60 },\n  { label: \"1.5h\", minutes: 90 },\n  { label: \"2h\", minutes: 120 },\n];\n\n// Helper to add minutes to a time string\nexport function addMinutesToTime(time: string, minutes: number): string {\n  const [h, m] = time.split(':').map(Number);\n  const totalMins = h * 60 + m + minutes;\n  const newH = Math.floor(totalMins / 60) % 24;\n  const newM = totalMins % 60;\n  return `${newH.toString().padStart(2, '0')}:${newM.toString().padStart(2, '0')}`;\n}\n\nexport interface DayData {\n  note: string;\n  dots: DotColor[];\n  timeBlocks?: TimeBlock[];\n  contentBlocks?: ContentBlock[];\n  dayColor?: DayColorCode;\n}\n\nexport type ViewMode = \"year\" | \"month\" | \"week\" | \"day\";\n\nexport type CalendarData = Record<string, Record<string, DayData>>;\n\nexport const MONTH_NAMES = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\",\n];\n\nexport const MONTH_NAMES_SHORT = [\n  \"JAN\",\n  \"FEB\",\n  \"MAR\",\n  \"APR\",\n  \"MAY\",\n  \"JUN\",\n  \"JUL\",\n  \"AUG\",\n  \"SEP\",\n  \"OCT\",\n  \"NOV\",\n  \"DEC\",\n];\n\nexport const WEEKDAYS = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\nexport const WEEKDAYS_SHORT = [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"];\n\nexport const DOT_COLORS: Record<DotColor, string> = {\n  1: \"bg-dot-1\",\n  2: \"bg-dot-2\",\n  3: \"bg-dot-3\",\n  4: \"bg-dot-4\",\n  5: \"bg-dot-5\",\n  6: \"bg-dot-6\",\n  7: \"bg-dot-7\",\n};\n\n// Meaningful marker system - each color represents a utility\nexport const DOT_LABELS: Record<DotColor, { name: string; description: string }> = {\n  1: { name: \"Focus\", description: \"Deep work sessions\" },\n  2: { name: \"Joy\", description: \"Moments of happiness\" },\n  3: { name: \"Health\", description: \"Wellness & exercise\" },\n  4: { name: \"Rest\", description: \"Recovery & sleep\" },\n  5: { name: \"Social\", description: \"Time with others\" },\n  6: { name: \"Create\", description: \"Making & building\" },\n  7: { name: \"Review\", description: \"Reflection & planning\" },\n};\n\n// Time block categories mapped to the 7-color system\nexport const BLOCK_CATEGORIES: Record<TimeBlockCategory, { \n  label: string; \n  color: DotColor;\n  bgClass: string;\n  borderClass: string;\n  textClass: string;\n}> = {\n  focus: { label: \"Focus\", color: 1, bgClass: \"bg-dot-1/20\", borderClass: \"border-dot-1\", textClass: \"text-dot-1\" },\n  joy: { label: \"Joy\", color: 2, bgClass: \"bg-dot-2/30\", borderClass: \"border-dot-2\", textClass: \"text-dot-2\" },\n  health: { label: \"Health\", color: 3, bgClass: \"bg-dot-3/20\", borderClass: \"border-dot-3\", textClass: \"text-dot-3\" },\n  rest: { label: \"Rest\", color: 4, bgClass: \"bg-dot-4/20\", borderClass: \"border-dot-4\", textClass: \"text-dot-4\" },\n  social: { label: \"Social\", color: 5, bgClass: \"bg-dot-5/20\", borderClass: \"border-dot-5\", textClass: \"text-dot-5\" },\n  create: { label: \"Create\", color: 6, bgClass: \"bg-dot-6/20\", borderClass: \"border-dot-6\", textClass: \"text-dot-6\" },\n  review: { label: \"Review\", color: 7, bgClass: \"bg-dot-7/20\", borderClass: \"border-dot-7\", textClass: \"text-dot-7\" },\n};\n\n// Helper to format time for display\nexport function formatTime(time: string): string {\n  const [hours, minutes] = time.split(':').map(Number);\n  const ampm = hours >= 12 ? 'pm' : 'am';\n  const h = hours % 12 || 12;\n  return minutes === 0 ? `${h}${ampm}` : `${h}:${minutes.toString().padStart(2, '0')}${ampm}`;\n}\n\n// Helper to format time range\nexport function formatTimeRange(start: string, end: string): string {\n  return `${formatTime(start)}-${formatTime(end)}`;\n}\n\nexport function generateId(): string {\n  return Math.random().toString(36).substring(2, 9);\n}\n\nexport function getDaysInMonth(month: number, year: number): number {\n  return new Date(year, month + 1, 0).getDate();\n}\n\nexport function getFirstDayOfMonth(month: number, year: number): number {\n  return new Date(year, month, 1).getDay();\n}\n\nexport function getWeekStart(date: Date): Date {\n  const d = new Date(date);\n  const day = d.getDay();\n  d.setDate(d.getDate() - day);\n  d.setHours(0, 0, 0, 0);\n  return d;\n}\n\nexport function formatDateKey(year: number, month: number): string {\n  return `${year}-${month}`;\n}\n\nexport function isToday(year: number, month: number, day: number): boolean {\n  const today = new Date();\n  return (\n    today.getFullYear() === year &&\n    today.getMonth() === month &&\n    today.getDate() === day\n  );\n}\n\nexport function getWeekDates(year: number, month: number, day: number): Date[] {\n  const date = new Date(year, month, day);\n  const dayOfWeek = date.getDay();\n  const startOfWeek = new Date(date);\n  startOfWeek.setDate(date.getDate() - dayOfWeek);\n  \n  return Array.from({ length: 7 }, (_, i) => {\n    const d = new Date(startOfWeek);\n    d.setDate(startOfWeek.getDate() + i);\n    return d;\n  });\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/day-color-picker.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { DAY_COLORS, type DayColorCode } from \"./calendar-types\";\n\ninterface DayColorPickerProps {\n  currentColor: DayColorCode;\n  onColorChange: (color: DayColorCode) => void;\n  onClose: () => void;\n  position: { x: number; y: number };\n  dateLabel?: string;\n}\n\nexport function DayColorPicker({\n  currentColor,\n  onColorChange,\n  onClose,\n  position,\n  dateLabel,\n}: DayColorPickerProps) {\n  const ref = useRef<HTMLDivElement>(null);\n\n  // Close on click outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (ref.current && !ref.current.contains(e.target as Node)) {\n        onClose();\n      }\n    };\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") onClose();\n    };\n    \n    document.addEventListener(\"mousedown\", handleClickOutside);\n    document.addEventListener(\"keydown\", handleEscape);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n      document.removeEventListener(\"keydown\", handleEscape);\n    };\n  }, [onClose]);\n\n  // Adjust position to stay in viewport\n  const adjustedPosition = { ...position };\n  if (typeof window !== \"undefined\") {\n    const menuWidth = 200;\n    const menuHeight = 320;\n    if (position.x + menuWidth > window.innerWidth) {\n      adjustedPosition.x = window.innerWidth - menuWidth - 8;\n    }\n    if (position.y + menuHeight > window.innerHeight) {\n      adjustedPosition.y = window.innerHeight - menuHeight - 8;\n    }\n  }\n\n  return (\n    <div\n      ref={ref}\n      className=\"fixed z-[100] bg-popover border border-border shadow-lg rounded-sm py-1 min-w-[180px]\"\n      style={{ left: adjustedPosition.x, top: adjustedPosition.y }}\n    >\n      {dateLabel && (\n        <div className=\"px-3 py-1.5 border-b border-border mb-1\">\n          <div className=\"text-[9px] uppercase tracking-wider text-muted-foreground\">\n            Set Day Theme\n          </div>\n          <div className=\"text-[11px] font-medium text-foreground\">\n            {dateLabel}\n          </div>\n        </div>\n      )}\n      \n      <div className=\"px-1\">\n        {(Object.entries(DAY_COLORS) as [string, typeof DAY_COLORS[1]][]).map(\n          ([code, info]) => {\n            const colorCode = Number(code) as Exclude<DayColorCode, null>;\n            return (\n              <button\n                key={code}\n                type=\"button\"\n                onClick={() => onColorChange(colorCode)}\n                className={cn(\n                  \"w-full flex items-center gap-2.5 px-2 py-1.5 text-left transition-colors rounded-sm\",\n                  \"hover:bg-accent\",\n                  currentColor === colorCode && \"bg-accent\"\n                )}\n              >\n                <div className={cn(\"w-3 h-3 rounded-full flex-shrink-0\", info.bgClassSolid)} />\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"text-[11px] font-medium\">{info.label}</div>\n                  <div className=\"text-[9px] text-muted-foreground leading-tight\">{info.description}</div>\n                </div>\n                {currentColor === colorCode && (\n                  <span className=\"text-[9px] text-muted-foreground\">*</span>\n                )}\n              </button>\n            );\n          }\n        )}\n      </div>\n      \n      {currentColor && (\n        <>\n          <div className=\"border-t border-border my-1\" />\n          <div className=\"px-1\">\n            <button\n              type=\"button\"\n              onClick={() => onColorChange(null)}\n              className=\"w-full flex items-center gap-2.5 px-2 py-1.5 text-left hover:bg-accent transition-colors rounded-sm\"\n            >\n              <div className=\"w-3 h-3 rounded-full flex-shrink-0 border border-muted-foreground/40 bg-background\" />\n              <span className=\"text-[11px] text-muted-foreground\">Clear theme</span>\n            </button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAcO,SAAS,eAAe,EAC7B,YAAY,EACZ,aAAa,EACb,OAAO,EACP,QAAQ,EACR,SAAS,EACW;;IACpB,MAAM,MAAM,IAAA,uSAAM,EAAiB;IAEnC,yBAAyB;IACzB,IAAA,0SAAS;oCAAC;YACR,MAAM;+DAAqB,CAAC;oBAC1B,IAAI,IAAI,OAAO,IAAI,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GAAW;wBAC1D;oBACF;gBACF;;YACA,MAAM;yDAAe,CAAC;oBACpB,IAAI,EAAE,GAAG,KAAK,UAAU;gBAC1B;;YAEA,SAAS,gBAAgB,CAAC,aAAa;YACvC,SAAS,gBAAgB,CAAC,WAAW;YACrC;4CAAO;oBACL,SAAS,mBAAmB,CAAC,aAAa;oBAC1C,SAAS,mBAAmB,CAAC,WAAW;gBAC1C;;QACF;mCAAG;QAAC;KAAQ;IAEZ,sCAAsC;IACtC,MAAM,mBAAmB;QAAE,GAAG,QAAQ;IAAC;IACvC,wCAAmC;QACjC,MAAM,YAAY;QAClB,MAAM,aAAa;QACnB,IAAI,SAAS,CAAC,GAAG,YAAY,OAAO,UAAU,EAAE;YAC9C,iBAAiB,CAAC,GAAG,OAAO,UAAU,GAAG,YAAY;QACvD;QACA,IAAI,SAAS,CAAC,GAAG,aAAa,OAAO,WAAW,EAAE;YAChD,iBAAiB,CAAC,GAAG,OAAO,WAAW,GAAG,aAAa;QACzD;IACF;IAEA,qBACE,6TAAC;QACC,KAAK;QACL,WAAU;QACV,OAAO;YAAE,MAAM,iBAAiB,CAAC;YAAE,KAAK,iBAAiB,CAAC;QAAC;;YAE1D,2BACC,6TAAC;gBAAI,WAAU;;kCACb,6TAAC;wBAAI,WAAU;kCAA4D;;;;;;kCAG3E,6TAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;;;0BAKP,6TAAC;gBAAI,WAAU;0BACZ,AAAC,OAAO,OAAO,CAAC,gJAAU,EAAuC,GAAG,CACnE,CAAC,CAAC,MAAM,KAAK;oBACX,MAAM,YAAY,OAAO;oBACzB,qBACE,6TAAC;wBAEC,MAAK;wBACL,SAAS,IAAM,cAAc;wBAC7B,WAAW,IAAA,qHAAE,EACX,uFACA,mBACA,iBAAiB,aAAa;;0CAGhC,6TAAC;gCAAI,WAAW,IAAA,qHAAE,EAAC,sCAAsC,KAAK,YAAY;;;;;;0CAC1E,6TAAC;gCAAI,WAAU;;kDACb,6TAAC;wCAAI,WAAU;kDAA2B,KAAK,KAAK;;;;;;kDACpD,6TAAC;wCAAI,WAAU;kDAAkD,KAAK,WAAW;;;;;;;;;;;;4BAElF,iBAAiB,2BAChB,6TAAC;gCAAK,WAAU;0CAAmC;;;;;;;uBAfhD;;;;;gBAmBX;;;;;;YAIH,8BACC;;kCACE,6TAAC;wBAAI,WAAU;;;;;;kCACf,6TAAC;wBAAI,WAAU;kCACb,cAAA,6TAAC;4BACC,MAAK;4BACL,SAAS,IAAM,cAAc;4BAC7B,WAAU;;8CAEV,6TAAC;oCAAI,WAAU;;;;;;8CACf,6TAAC;oCAAK,WAAU;8CAAoC;;;;;;;;;;;;;;;;;;;;;;;;;AAOlE;GAxGgB;KAAA"}},
    {"offset": {"line": 548, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/hooks/use-mobile.ts"],"sourcesContent":["import * as React from 'react'\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener('change', onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener('change', onChange)\n  }, [])\n\n  return !!isMobile\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,MAAM,oBAAoB;AAEnB,SAAS;;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,ySAAc,CAAsB;IAEpE,0SAAe;iCAAC;YACd,MAAM,MAAM,OAAO,UAAU,CAAC,CAAC,YAAY,EAAE,oBAAoB,EAAE,GAAG,CAAC;YACvE,MAAM;kDAAW;oBACf,YAAY,OAAO,UAAU,GAAG;gBAClC;;YACA,IAAI,gBAAgB,CAAC,UAAU;YAC/B,YAAY,OAAO,UAAU,GAAG;YAChC;yCAAO,IAAM,IAAI,mBAAmB,CAAC,UAAU;;QACjD;gCAAG,EAAE;IAEL,OAAO,CAAC,CAAC;AACX;GAdgB"}},
    {"offset": {"line": 584, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/ui/popover.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as PopoverPrimitive from '@radix-ui/react-popover'\n\nimport { cn } from '@/lib/utils'\n\nfunction Popover({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) {\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />\n}\n\nfunction PopoverTrigger({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />\n}\n\nfunction PopoverContent({\n  className,\n  align = 'center',\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Content>) {\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        data-slot=\"popover-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden',\n          className,\n        )}\n        {...props}\n      />\n    </PopoverPrimitive.Portal>\n  )\n}\n\nfunction PopoverAnchor({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {\n  return <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />\n}\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,QAAQ,EACf,GAAG,OACgD;IACnD,qBAAO,6TAAC,+XAAqB;QAAC,aAAU;QAAW,GAAG,KAAK;;;;;;AAC7D;KAJS;AAMT,SAAS,eAAe,EACtB,GAAG,OACmD;IACtD,qBAAO,6TAAC,kYAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;MAJS;AAMT,SAAS,eAAe,EACtB,SAAS,EACT,QAAQ,QAAQ,EAChB,aAAa,CAAC,EACd,GAAG,OACmD;IACtD,qBACE,6TAAC,iYAAuB;kBACtB,cAAA,6TAAC,kYAAwB;YACvB,aAAU;YACV,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,qHAAE,EACX,keACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIjB;MApBS;AAsBT,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,6TAAC,iYAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS"}},
    {"offset": {"line": 667, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/ui/drawer.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport { Drawer as DrawerPrimitive } from 'vaul'\n\nimport { cn } from '@/lib/utils'\n\nfunction Drawer({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) {\n  return <DrawerPrimitive.Root data-slot=\"drawer\" {...props} />\n}\n\nfunction DrawerTrigger({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Trigger>) {\n  return <DrawerPrimitive.Trigger data-slot=\"drawer-trigger\" {...props} />\n}\n\nfunction DrawerPortal({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Portal>) {\n  return <DrawerPrimitive.Portal data-slot=\"drawer-portal\" {...props} />\n}\n\nfunction DrawerClose({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Close>) {\n  return <DrawerPrimitive.Close data-slot=\"drawer-close\" {...props} />\n}\n\nfunction DrawerOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Overlay>) {\n  return (\n    <DrawerPrimitive.Overlay\n      data-slot=\"drawer-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DrawerContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Content>) {\n  return (\n    <DrawerPortal data-slot=\"drawer-portal\">\n      <DrawerOverlay />\n      <DrawerPrimitive.Content\n        data-slot=\"drawer-content\"\n        className={cn(\n          'group/drawer-content bg-background fixed z-50 flex h-auto flex-col',\n          'data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b',\n          'data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t',\n          'data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm',\n          'data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm',\n          className,\n        )}\n        {...props}\n      >\n        <div className=\"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block\" />\n        {children}\n      </DrawerPrimitive.Content>\n    </DrawerPortal>\n  )\n}\n\nfunction DrawerHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"drawer-header\"\n      className={cn(\n        'flex flex-col gap-0.5 p-4 group-data-[vaul-drawer-direction=bottom]/drawer-content:text-center group-data-[vaul-drawer-direction=top]/drawer-content:text-center md:gap-1.5 md:text-left',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DrawerFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"drawer-footer\"\n      className={cn('mt-auto flex flex-col gap-2 p-4', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DrawerTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Title>) {\n  return (\n    <DrawerPrimitive.Title\n      data-slot=\"drawer-title\"\n      className={cn('text-foreground font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DrawerDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Description>) {\n  return (\n    <DrawerPrimitive.Description\n      data-slot=\"drawer-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6TAAC,sWAAe,CAAC,IAAI;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,6TAAC,sWAAe,CAAC,OAAO;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,6TAAC,sWAAe,CAAC,MAAM;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6TAAC,sWAAe,CAAC,KAAK;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,6TAAC,sWAAe,CAAC,OAAO;QACtB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,GAAG,OACkD;IACrD,qBACE,6TAAC;QAAa,aAAU;;0BACtB,6TAAC;;;;;0BACD,6TAAC,sWAAe,CAAC,OAAO;gBACtB,aAAU;gBACV,WAAW,IAAA,qHAAE,EACX,sEACA,kQACA,uRACA,+NACA,yNACA;gBAED,GAAG,KAAK;;kCAET,6TAAC;wBAAI,WAAU;;;;;;oBACd;;;;;;;;;;;;;AAIT;MAzBS;AA2BT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4LACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,mCAAmC;QAChD,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6TAAC,sWAAe,CAAC,KAAK;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,6TAAC,sWAAe,CAAC,WAAW;QAC1B,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 855, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/quick-add-popover.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { useIsMobile } from \"@/hooks/use-mobile\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport {\n  Drawer,\n  DrawerContent,\n  DrawerHeader,\n  DrawerTitle,\n  DrawerClose,\n} from \"@/components/ui/drawer\";\nimport {\n  type DayData,\n  type TimeBlock,\n  type TimeBlockCategory,\n  BLOCK_CATEGORIES,\n  DURATION_PRESETS,\n  MONTH_NAMES,\n  WEEKDAYS,\n  generateId,\n  formatTimeRange,\n  addMinutesToTime,\n} from \"./calendar-types\";\n\ninterface QuickAddPopoverProps {\n  children: React.ReactNode;\n  date: Date;\n  data: DayData;\n  onUpdate: (data: DayData) => void;\n  onViewFullDay?: () => void;\n  /** If provided, opens in edit mode for this block */\n  editBlockId?: string;\n}\n\nconst CATEGORY_KEYS = Object.keys(BLOCK_CATEGORIES) as TimeBlockCategory[];\n\n// Get next available start time based on existing blocks\nfunction getNextAvailableTime(blocks: TimeBlock[]): string {\n  if (blocks.length === 0) return \"09:00\";\n  const sorted = [...blocks].sort((a, b) => a.endTime.localeCompare(b.endTime));\n  const lastEnd = sorted[sorted.length - 1].endTime;\n  // Don't go past 23:00\n  if (lastEnd >= \"23:00\") return \"09:00\";\n  return lastEnd;\n}\n\nexport function QuickAddPopover({\n  children,\n  date,\n  data,\n  onUpdate,\n  onViewFullDay,\n  editBlockId,\n}: QuickAddPopoverProps) {\n  const isMobile = useIsMobile();\n  const [open, setOpen] = useState(false);\n  const [selectedDuration, setSelectedDuration] = useState(60);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const timeBlocks = data.timeBlocks || [];\n  const editingBlock = editBlockId\n    ? timeBlocks.find((b) => b.id === editBlockId)\n    : null;\n\n  const [newBlock, setNewBlock] = useState<Partial<TimeBlock>>(() => {\n    if (editingBlock) {\n      return { ...editingBlock };\n    }\n    const start = getNextAvailableTime(timeBlocks);\n    return {\n      startTime: start,\n      endTime: addMinutesToTime(start, 60),\n      title: \"\",\n      category: \"focus\",\n    };\n  });\n\n  // Reset form when opening\n  useEffect(() => {\n    if (open) {\n      if (editingBlock) {\n        setNewBlock({ ...editingBlock });\n        // Calculate duration from existing block\n        const [startH, startM] = editingBlock.startTime.split(\":\").map(Number);\n        const [endH, endM] = editingBlock.endTime.split(\":\").map(Number);\n        const dur = (endH * 60 + endM) - (startH * 60 + startM);\n        setSelectedDuration(dur > 0 ? dur : 60);\n      } else {\n        const start = getNextAvailableTime(timeBlocks);\n        setNewBlock({\n          startTime: start,\n          endTime: addMinutesToTime(start, 60),\n          title: \"\",\n          category: \"focus\",\n        });\n        setSelectedDuration(60);\n      }\n      // Focus input after a short delay\n      setTimeout(() => inputRef.current?.focus(), 100);\n    }\n  }, [open, editingBlock, timeBlocks]);\n\n  const handleDurationChange = (minutes: number) => {\n    setSelectedDuration(minutes);\n    setNewBlock((prev) => ({\n      ...prev,\n      endTime: addMinutesToTime(prev.startTime || \"09:00\", minutes),\n    }));\n  };\n\n  const handleStartTimeChange = (startTime: string) => {\n    setNewBlock((prev) => ({\n      ...prev,\n      startTime,\n      endTime: addMinutesToTime(startTime, selectedDuration),\n    }));\n  };\n\n  const handleAddBlock = () => {\n    if (!newBlock.title?.trim()) return;\n\n    const block: TimeBlock = {\n      id: editingBlock?.id || generateId(),\n      startTime: newBlock.startTime || \"09:00\",\n      endTime: newBlock.endTime || \"10:00\",\n      title: newBlock.title.trim(),\n      category: newBlock.category || \"focus\",\n    };\n\n    let updatedBlocks: TimeBlock[];\n    if (editingBlock) {\n      updatedBlocks = timeBlocks.map((b) =>\n        b.id === editingBlock.id ? block : b\n      );\n    } else {\n      updatedBlocks = [...timeBlocks, block];\n    }\n\n    onUpdate({\n      ...data,\n      timeBlocks: updatedBlocks.sort((a, b) =>\n        a.startTime.localeCompare(b.startTime)\n      ),\n    });\n    setOpen(false);\n  };\n\n  const handleDeleteBlock = () => {\n    if (!editingBlock) return;\n    onUpdate({\n      ...data,\n      timeBlocks: timeBlocks.filter((b) => b.id !== editingBlock.id),\n    });\n    setOpen(false);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && newBlock.title?.trim()) {\n      e.preventDefault();\n      handleAddBlock();\n    }\n  };\n\n  const formContent = (\n    <div className=\"flex flex-col gap-3\">\n      {/* Title input */}\n      <input\n        ref={inputRef}\n        type=\"text\"\n        value={newBlock.title || \"\"}\n        onChange={(e) => setNewBlock({ ...newBlock, title: e.target.value })}\n        onKeyDown={handleKeyDown}\n        placeholder=\"What are you doing?\"\n        className=\"w-full text-sm bg-transparent border-b border-border px-1 py-2 placeholder:text-muted-foreground/50 outline-none focus:border-foreground transition-colors\"\n        autoFocus\n      />\n\n      {/* Duration presets */}\n      <div className=\"flex flex-col gap-1.5\">\n        <span className=\"text-[10px] uppercase tracking-wider text-muted-foreground\">\n          Duration\n        </span>\n        <div className=\"flex gap-1.5 flex-wrap\">\n          {DURATION_PRESETS.map((preset) => (\n            <button\n              key={preset.minutes}\n              type=\"button\"\n              onClick={() => handleDurationChange(preset.minutes)}\n              className={cn(\n                \"text-xs px-3 py-1.5 border rounded-md transition-colors\",\n                selectedDuration === preset.minutes\n                  ? \"bg-foreground text-background border-foreground\"\n                  : \"bg-transparent text-muted-foreground border-border hover:border-foreground/50 hover:text-foreground\"\n              )}\n            >\n              {preset.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Time selector */}\n      <div className=\"flex items-center gap-3\">\n        <div className=\"flex flex-col gap-1\">\n          <span className=\"text-[10px] uppercase tracking-wider text-muted-foreground\">\n            Start\n          </span>\n          <input\n            type=\"time\"\n            value={newBlock.startTime || \"09:00\"}\n            onChange={(e) => handleStartTimeChange(e.target.value)}\n            className=\"text-sm bg-transparent border border-border px-2 py-1.5 rounded-md outline-none focus:border-foreground transition-colors\"\n          />\n        </div>\n        <span className=\"text-muted-foreground mt-5\">→</span>\n        <div className=\"flex flex-col gap-1\">\n          <span className=\"text-[10px] uppercase tracking-wider text-muted-foreground\">\n            End\n          </span>\n          <span className=\"text-sm px-2 py-1.5 text-muted-foreground\">\n            {newBlock.endTime || \"10:00\"}\n          </span>\n        </div>\n      </div>\n\n      {/* Category selector */}\n      <div className=\"flex flex-col gap-1.5\">\n        <span className=\"text-[10px] uppercase tracking-wider text-muted-foreground\">\n          Category\n        </span>\n        <div className=\"flex gap-1.5 flex-wrap\">\n          {CATEGORY_KEYS.map((catKey) => {\n            const c = BLOCK_CATEGORIES[catKey];\n            return (\n              <button\n                key={catKey}\n                type=\"button\"\n                onClick={() => setNewBlock({ ...newBlock, category: catKey })}\n                className={cn(\n                  \"text-[10px] uppercase tracking-wider px-2 py-1 border rounded-md transition-colors\",\n                  newBlock.category === catKey\n                    ? cn(c.bgClass, c.borderClass, \"font-medium\")\n                    : \"bg-transparent text-muted-foreground border-border hover:border-foreground/30\"\n                )}\n              >\n                {c.label}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Actions */}\n      <div className=\"flex items-center gap-2 pt-2 border-t border-border mt-1\">\n        <button\n          type=\"button\"\n          onClick={handleAddBlock}\n          disabled={!newBlock.title?.trim()}\n          className=\"flex-1 text-xs uppercase tracking-wider px-4 py-2 bg-foreground text-background hover:bg-foreground/90 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors\"\n        >\n          {editingBlock ? \"Update\" : \"Add Block\"}\n        </button>\n        {editingBlock && (\n          <button\n            type=\"button\"\n            onClick={handleDeleteBlock}\n            className=\"text-xs uppercase tracking-wider px-3 py-2 text-destructive hover:bg-destructive/10 rounded-md transition-colors\"\n          >\n            Delete\n          </button>\n        )}\n      </div>\n\n      {/* Existing blocks preview */}\n      {timeBlocks.length > 0 && !editingBlock && (\n        <div className=\"pt-2 border-t border-border\">\n          <span className=\"text-[10px] uppercase tracking-wider text-muted-foreground\">\n            Today ({timeBlocks.length})\n          </span>\n          <div className=\"mt-1.5 flex flex-col gap-1 max-h-24 overflow-y-auto\">\n            {timeBlocks\n              .sort((a, b) => a.startTime.localeCompare(b.startTime))\n              .map((block) => {\n                const cat = BLOCK_CATEGORIES[block.category];\n                return (\n                  <div\n                    key={block.id}\n                    className={cn(\n                      \"px-2 py-1 rounded-sm border-l-2 text-[11px]\",\n                      cat?.bgClass || \"bg-muted/50\",\n                      cat?.borderClass || \"border-muted-foreground/50\"\n                    )}\n                  >\n                    <span className=\"font-medium\">{block.title}</span>\n                    <span className=\"text-muted-foreground ml-2\">\n                      {formatTimeRange(block.startTime, block.endTime)}\n                    </span>\n                  </div>\n                );\n              })}\n          </div>\n        </div>\n      )}\n\n      {/* View full day link */}\n      {onViewFullDay && (\n        <button\n          type=\"button\"\n          onClick={() => {\n            setOpen(false);\n            onViewFullDay();\n          }}\n          className=\"text-[11px] text-muted-foreground hover:text-foreground transition-colors text-center py-1\"\n        >\n          View Full Day →\n        </button>\n      )}\n    </div>\n  );\n\n  const dateLabel = `${WEEKDAYS[date.getDay()]}, ${MONTH_NAMES[date.getMonth()]} ${date.getDate()}`;\n\n  // Mobile: use Drawer\n  if (isMobile) {\n    return (\n      <Drawer open={open} onOpenChange={setOpen}>\n        <div onClick={() => setOpen(true)}>{children}</div>\n        <DrawerContent>\n          <DrawerHeader className=\"pb-2\">\n            <DrawerTitle className=\"text-base font-medium\">\n              {editingBlock ? \"Edit Block\" : \"Quick Add\"}\n            </DrawerTitle>\n            <p className=\"text-sm text-muted-foreground\">{dateLabel}</p>\n          </DrawerHeader>\n          <div className=\"px-4 pb-6\">{formContent}</div>\n        </DrawerContent>\n      </Drawer>\n    );\n  }\n\n  // Desktop: use Popover\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>{children}</PopoverTrigger>\n      <PopoverContent\n        className=\"w-80 p-4\"\n        align=\"start\"\n        side=\"right\"\n        sideOffset={8}\n      >\n        <div className=\"flex items-center justify-between mb-3\">\n          <div>\n            <h3 className=\"text-sm font-medium\">\n              {editingBlock ? \"Edit Block\" : \"Quick Add\"}\n            </h3>\n            <p className=\"text-xs text-muted-foreground\">{dateLabel}</p>\n          </div>\n        </div>\n        {formContent}\n      </PopoverContent>\n    </Popover>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1409, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/day-cell.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { useState, useRef, useEffect } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { type DayData, type DotColor, DOT_COLORS, BLOCK_CATEGORIES, DAY_COLORS, type DayColorCode, MONTH_NAMES_SHORT } from \"./calendar-types\";\nimport { DayColorPicker } from \"./day-color-picker\";\nimport { QuickAddPopover } from \"./quick-add-popover\";\n\nexport type { DotColor, DayData };\n\ninterface DayCellProps {\n  day: number;\n  month: number;\n  year: number;\n  data: DayData;\n  isToday: boolean;\n  onUpdate: (data: DayData) => void;\n  selectedDotColor: DotColor;\n  onDayClick?: () => void;\n}\n\nexport function DayCell({\n  day,\n  month,\n  year,\n  data,\n  isToday,\n  onUpdate,\n  selectedDotColor,\n  onDayClick,\n}: DayCellProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [noteValue, setNoteValue] = useState(data.note);\n  const [colorPickerPos, setColorPickerPos] = useState<{ x: number; y: number } | null>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Create date object for the popover\n  const date = new Date(year, month, day);\n\n  useEffect(() => {\n    setNoteValue(data.note);\n  }, [data.note]);\n\n  useEffect(() => {\n    if (isEditing && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isEditing]);\n\n  const handleShiftClick = (e: React.MouseEvent) => {\n    if (e.shiftKey) {\n      e.stopPropagation();\n      // Shift+click to toggle dot\n      const hasDot = data.dots.includes(selectedDotColor);\n      const newDots = hasDot\n        ? data.dots.filter((d) => d !== selectedDotColor)\n        : [...data.dots, selectedDotColor];\n      onUpdate({ ...data, dots: newDots });\n    }\n  };\n\n  const handleBlur = () => {\n    setIsEditing(false);\n    if (noteValue !== data.note) {\n      onUpdate({ ...data, note: noteValue });\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\") {\n      handleBlur();\n    }\n    if (e.key === \"Escape\") {\n      setNoteValue(data.note);\n      setIsEditing(false);\n    }\n  };\n\n  const handleContextMenu = (e: React.MouseEvent) => {\n    e.preventDefault();\n    setColorPickerPos({ x: e.clientX, y: e.clientY });\n  };\n\n  const handleColorChange = (color: DayColorCode) => {\n    onUpdate({ ...data, dayColor: color });\n    setColorPickerPos(null);\n  };\n\n  // Get unique time block categories for this day\n  const blockCategories = data.timeBlocks\n    ? [...new Set(data.timeBlocks.map((b) => b.category))]\n    : [];\n\n  // Get day color info if set\n  const dayColorInfo = data.dayColor ? DAY_COLORS[data.dayColor] : null;\n\n  const cellContent = (\n    <div\n      onClick={handleShiftClick}\n      onContextMenu={handleContextMenu}\n      className={cn(\n        \"relative border-r border-b border-border p-0.5 cursor-pointer min-h-0 overflow-hidden h-full\",\n        \"transition-colors duration-100\",\n        !dayColorInfo && \"hover:bg-accent/30\",\n        !dayColorInfo && isToday && \"bg-accent/50\",\n        dayColorInfo && dayColorInfo.bgClass,\n        dayColorInfo && \"hover:opacity-80\"\n      )}\n    >\n      {/* Day number */}\n      <span\n        className={cn(\n          \"absolute top-0 left-0.5 text-[8px] leading-tight z-10\",\n          isToday ? \"text-foreground font-medium\" : \"text-muted-foreground\"\n        )}\n      >\n        {day}\n      </span>\n\n      {/* Dots */}\n      {data.dots.length > 0 && (\n        <div className=\"absolute top-0 right-0.5 flex gap-px z-10\">\n          {data.dots.slice(0, 3).map((dotColor, i) => (\n            <div\n              key={i}\n              className={cn(\"w-1.5 h-1.5 rounded-full\", DOT_COLORS[dotColor])}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Time block indicators - colored bars at bottom */}\n      {blockCategories.length > 0 && (\n        <div className=\"absolute bottom-0 left-0 right-0 flex h-1\">\n          {blockCategories.map((cat) => {\n            const catInfo = BLOCK_CATEGORIES[cat];\n            // Fallback for legacy categories\n            if (!catInfo) {\n              return (\n                <div\n                  key={cat}\n                  className=\"flex-1 bg-muted-foreground/50\"\n                />\n              );\n            }\n            return (\n              <div\n                key={cat}\n                className=\"flex-1\"\n                style={{ backgroundColor: `var(--dot-${catInfo.color})` }}\n              />\n            );\n          })}\n        </div>\n      )}\n\n      {/* Note preview - hidden in year view to keep clean */}\n      {!onDayClick && isEditing ? (\n        <input\n          ref={inputRef}\n          type=\"text\"\n          value={noteValue}\n          onChange={(e) => setNoteValue(e.target.value.slice(0, 24))}\n          onBlur={handleBlur}\n          onKeyDown={handleKeyDown}\n          className=\"absolute inset-x-0.5 bottom-1 top-2.5 bg-transparent text-[7px] leading-tight text-foreground outline-none\"\n          maxLength={24}\n        />\n      ) : null}\n    </div>\n  );\n\n  return (\n    <>\n      <QuickAddPopover\n        date={date}\n        data={data}\n        onUpdate={onUpdate}\n        onViewFullDay={onDayClick}\n      >\n        {cellContent}\n      </QuickAddPopover>\n      {colorPickerPos && (\n        <DayColorPicker\n          currentColor={data.dayColor ?? null}\n          onColorChange={handleColorChange}\n          onClose={() => setColorPickerPos(null)}\n          position={colorPickerPos}\n          dateLabel={`${MONTH_NAMES_SHORT[month]} ${day}`}\n        />\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1619, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/month-grid.tsx"],"sourcesContent":["\"use client\";\n\nimport { DayCell } from \"./day-cell\";\nimport {\n  type DayData,\n  type DotColor,\n  MONTH_NAMES_SHORT,\n  getDaysInMonth,\n  getFirstDayOfMonth,\n} from \"./calendar-types\";\n\nconst MONTH_NAMES = MONTH_NAMES_SHORT;\n\ninterface MonthGridProps {\n  month: number;\n  year: number;\n  data: Record<string, DayData>;\n  onDayUpdate: (day: number, data: DayData) => void;\n  selectedDotColor: DotColor;\n  onDayClick?: (day: number) => void;\n}\n\nexport function MonthGrid({\n  month,\n  year,\n  data,\n  onDayUpdate,\n  selectedDotColor,\n  onDayClick,\n}: MonthGridProps) {\n  const daysInMonth = getDaysInMonth(month, year);\n  const firstDay = getFirstDayOfMonth(month, year);\n  const today = new Date();\n  const isCurrentMonth =\n    today.getMonth() === month && today.getFullYear() === year;\n  const currentDay = today.getDate();\n\n  const emptyDays = Array(firstDay).fill(null);\n  const days = Array.from({ length: daysInMonth }, (_, i) => i + 1);\n\n  // Always use 6 rows for consistent height across all months\n  const totalWeeks = 6;\n\n  return (\n    <div className=\"flex flex-col border-r border-b border-border\">\n      {/* Month header - minimal */}\n      <div className=\"h-4 flex items-center px-1 border-b border-border flex-shrink-0\">\n        <span className=\"text-[9px] font-medium tracking-wider text-muted-foreground\">\n          {MONTH_NAMES_SHORT[month]}\n        </span>\n      </div>\n\n      {/* Days grid - fixed 6 rows for consistency */}\n      <div \n        className=\"flex-1 grid grid-cols-7\"\n        style={{ gridTemplateRows: `repeat(${totalWeeks}, 1fr)` }}\n      >\n        {/* Empty cells for alignment */}\n        {emptyDays.map((_, i) => (\n          <div key={`empty-${i}`} className=\"border-r border-b border-border/50\" />\n        ))}\n\n        {/* Day cells */}\n        {days.map((day) => {\n          const dayKey = `${day}`;\n          const dayData = data[dayKey] || { note: \"\", dots: [] };\n\n          return (\n            <DayCell\n              key={day}\n              day={day}\n              month={month}\n              year={year}\n              data={dayData}\n              isToday={isCurrentMonth && day === currentDay}\n              onUpdate={(newData) => onDayUpdate(day, newData)}\n              selectedDotColor={selectedDotColor}\n              onDayClick={() => onDayClick?.(day)}\n            />\n          );\n        })}\n\n        {/* Fill remaining cells to complete 6 rows (42 total cells) */}\n        {Array.from({\n          length: 42 - firstDay - daysInMonth,\n        }).map((_, i) => (\n          <div\n            key={`fill-${i}`}\n            className=\"border-r border-b border-border/50\"\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAWA,MAAM,cAAc,uJAAiB;AAW9B,SAAS,UAAU,EACxB,KAAK,EACL,IAAI,EACJ,IAAI,EACJ,WAAW,EACX,gBAAgB,EAChB,UAAU,EACK;IACf,MAAM,cAAc,IAAA,oJAAc,EAAC,OAAO;IAC1C,MAAM,WAAW,IAAA,wJAAkB,EAAC,OAAO;IAC3C,MAAM,QAAQ,IAAI;IAClB,MAAM,iBACJ,MAAM,QAAQ,OAAO,SAAS,MAAM,WAAW,OAAO;IACxD,MAAM,aAAa,MAAM,OAAO;IAEhC,MAAM,YAAY,MAAM,UAAU,IAAI,CAAC;IACvC,MAAM,OAAO,MAAM,IAAI,CAAC;QAAE,QAAQ;IAAY,GAAG,CAAC,GAAG,IAAM,IAAI;IAE/D,4DAA4D;IAC5D,MAAM,aAAa;IAEnB,qBACE,6TAAC;QAAI,WAAU;;0BAEb,6TAAC;gBAAI,WAAU;0BACb,cAAA,6TAAC;oBAAK,WAAU;8BACb,uJAAiB,CAAC,MAAM;;;;;;;;;;;0BAK7B,6TAAC;gBACC,WAAU;gBACV,OAAO;oBAAE,kBAAkB,CAAC,OAAO,EAAE,WAAW,MAAM,CAAC;gBAAC;;oBAGvD,UAAU,GAAG,CAAC,CAAC,GAAG,kBACjB,6TAAC;4BAAuB,WAAU;2BAAxB,CAAC,MAAM,EAAE,GAAG;;;;;oBAIvB,KAAK,GAAG,CAAC,CAAC;wBACT,MAAM,SAAS,GAAG,KAAK;wBACvB,MAAM,UAAU,IAAI,CAAC,OAAO,IAAI;4BAAE,MAAM;4BAAI,MAAM,EAAE;wBAAC;wBAErD,qBACE,6TAAC,wIAAO;4BAEN,KAAK;4BACL,OAAO;4BACP,MAAM;4BACN,MAAM;4BACN,SAAS,kBAAkB,QAAQ;4BACnC,UAAU,CAAC,UAAY,YAAY,KAAK;4BACxC,kBAAkB;4BAClB,YAAY,IAAM,aAAa;2BAR1B;;;;;oBAWX;oBAGC,MAAM,IAAI,CAAC;wBACV,QAAQ,KAAK,WAAW;oBAC1B,GAAG,GAAG,CAAC,CAAC,GAAG,kBACT,6TAAC;4BAEC,WAAU;2BADL,CAAC,KAAK,EAAE,GAAG;;;;;;;;;;;;;;;;;AAO5B;KAxEgB"}},
    {"offset": {"line": 1727, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/month-view.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\nimport {\n  type DayData,\n  type DotColor,\n  type CalendarData,\n  type DayColorCode,\n  WEEKDAYS,\n  getDaysInMonth,\n  getFirstDayOfMonth,\n  isToday,\n  BLOCK_CATEGORIES,\n  formatTimeRange,\n  DOT_COLORS,\n  DAY_COLORS,\n  MONTH_NAMES_SHORT,\n} from \"./calendar-types\";\nimport { useState } from \"react\";\nimport { DayColorPicker } from \"./day-color-picker\";\nimport { QuickAddPopover } from \"./quick-add-popover\";\n\ninterface MonthViewProps {\n  year: number;\n  month: number;\n  data: CalendarData;\n  onDayUpdate: (month: number, day: number, data: DayData) => void;\n  selectedDotColor: DotColor;\n  onDayClick: (day: number) => void;\n}\n\nfunction DayCellLarge({\n  day,\n  month,\n  year,\n  data,\n  isCurrentDay,\n  onUpdate,\n  selectedDotColor,\n  onDayClick,\n}: {\n  day: number;\n  month: number;\n  year: number;\n  data: DayData;\n  isCurrentDay: boolean;\n  onUpdate: (data: DayData) => void;\n  selectedDotColor: DotColor;\n  onDayClick: () => void;\n}) {\n  const [colorPickerPos, setColorPickerPos] = useState<{ x: number; y: number } | null>(null);\n\n  const timeBlocks = data.timeBlocks || [];\n  const sortedBlocks = [...timeBlocks].sort((a, b) => a.startTime.localeCompare(b.startTime));\n  const visibleBlocks = sortedBlocks.slice(0, 3);\n  const moreCount = timeBlocks.length - 3;\n\n  // Get day color info\n  const dayColorInfo = data.dayColor ? DAY_COLORS[data.dayColor] : null;\n\n  // Create date object for the popover\n  const date = new Date(year, month, day);\n\n  const handleContextMenu = (e: React.MouseEvent) => {\n    e.preventDefault();\n    setColorPickerPos({ x: e.clientX, y: e.clientY });\n  };\n\n  const handleColorChange = (color: DayColorCode) => {\n    onUpdate({ ...data, dayColor: color });\n    setColorPickerPos(null);\n  };\n\n  const cellContent = (\n    <div\n      onContextMenu={handleContextMenu}\n      className={cn(\n        \"relative border-r border-b border-border p-1 cursor-pointer min-h-0 flex flex-col gap-0.5 overflow-hidden h-full\",\n        \"transition-colors duration-100\",\n        !dayColorInfo && \"hover:bg-accent/30\",\n        !dayColorInfo && isCurrentDay && \"bg-accent/50\",\n        dayColorInfo && dayColorInfo.bgClass,\n        dayColorInfo && \"hover:opacity-80\"\n      )}\n    >\n      {/* Day number */}\n      <span\n        className={cn(\n          \"text-[10px] leading-none flex-shrink-0\",\n          isCurrentDay ? \"text-foreground font-medium\" : \"text-muted-foreground\"\n        )}\n      >\n        {day}\n      </span>\n\n      {/* Time blocks as cards */}\n      <div className=\"flex-1 flex flex-col gap-0.5 min-h-0 overflow-hidden\">\n        {visibleBlocks.map((block) => {\n          const cat = BLOCK_CATEGORIES[block.category];\n          // Fallback for legacy categories\n          if (!cat) {\n            return (\n              <div\n                key={block.id}\n                className=\"px-1 py-0.5 rounded-sm border-l-2 border-muted-foreground/50 bg-muted/50 text-[8px] leading-tight truncate\"\n                title={`${block.title} (${formatTimeRange(block.startTime, block.endTime)})`}\n              >\n                <span className=\"font-medium\">{block.title}</span>\n              </div>\n            );\n          }\n          return (\n            <div\n              key={block.id}\n              className={cn(\n                \"px-1 py-0.5 rounded-sm border-l-2 text-[8px] leading-tight truncate\",\n                cat.bgClass,\n                cat.borderClass\n              )}\n              title={`${block.title} (${formatTimeRange(block.startTime, block.endTime)})`}\n            >\n              <span className=\"font-medium\">{block.title || cat.label}</span>\n            </div>\n          );\n        })}\n        {moreCount > 0 && (\n          <span className=\"text-[8px] text-muted-foreground\">+{moreCount} more</span>\n        )}\n      </div>\n    </div>\n  );\n\n  return (\n    <>\n      <QuickAddPopover\n        date={date}\n        data={data}\n        onUpdate={onUpdate}\n        onViewFullDay={onDayClick}\n      >\n        {cellContent}\n      </QuickAddPopover>\n      \n      {colorPickerPos && (\n        <DayColorPicker\n          currentColor={data.dayColor ?? null}\n          onColorChange={handleColorChange}\n          onClose={() => setColorPickerPos(null)}\n          position={colorPickerPos}\n          dateLabel={`${MONTH_NAMES_SHORT[month]} ${day}`}\n        />\n      )}\n    </>\n  );\n}\n\nexport function MonthView({\n  year,\n  month,\n  data,\n  onDayUpdate,\n  selectedDotColor,\n  onDayClick,\n}: MonthViewProps) {\n  const daysInMonth = getDaysInMonth(month, year);\n  const firstDay = getFirstDayOfMonth(month, year);\n\n  const emptyDays = Array(firstDay).fill(null);\n  const days = Array.from({ length: daysInMonth }, (_, i) => i + 1);\n  const totalCells = firstDay + daysInMonth;\n  const remainingCells = (7 - (totalCells % 7)) % 7;\n  const totalWeeks = Math.ceil(totalCells / 7);\n\n  const monthKey = `${year}-${month}`;\n  const monthData = data[monthKey] || {};\n\n  return (\n    <div className=\"h-full flex flex-col border-l border-t border-border\">\n      {/* Weekday headers */}\n      <div className=\"grid grid-cols-7 border-b border-border\">\n        {WEEKDAYS.map((day, i) => (\n          <div\n            key={i}\n            className=\"h-6 flex items-center justify-center text-[10px] font-medium text-muted-foreground border-r border-border last:border-r-0\"\n          >\n            {day}\n          </div>\n        ))}\n      </div>\n\n      {/* Days grid */}\n      <div\n        className=\"flex-1 grid grid-cols-7\"\n        style={{ gridTemplateRows: `repeat(${totalWeeks}, 1fr)` }}\n      >\n        {/* Empty cells */}\n        {emptyDays.map((_, i) => (\n          <div key={`empty-${i}`} className=\"border-r border-b border-border/50\" />\n        ))}\n\n        {/* Day cells */}\n        {days.map((day) => {\n          const dayKey = `${day}`;\n          const dayData = monthData[dayKey] || { note: \"\", dots: [] };\n\n          return (\n            <DayCellLarge\n              key={day}\n              day={day}\n              month={month}\n              year={year}\n              data={dayData}\n              isCurrentDay={isToday(year, month, day)}\n              onUpdate={(newData) => onDayUpdate(month, day, newData)}\n              selectedDotColor={selectedDotColor}\n              onDayClick={() => onDayClick(day)}\n            />\n          );\n        })}\n\n        {/* Fill remaining cells */}\n        {Array.from({ length: remainingCells }).map((_, i) => (\n          <div key={`fill-${i}`} className=\"border-r border-b border-border/50\" />\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1975, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/week-view.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\"\n\nimport { useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  type DayData,\n  type DotColor,\n  type DayColorCode,\n  WEEKDAYS,\n  MONTH_NAMES_SHORT,\n  BLOCK_CATEGORIES,\n  formatTimeRange,\n  DAY_COLORS,\n} from \"./calendar-types\";\nimport { DayColorPicker } from \"./day-color-picker\";\nimport { QuickAddPopover } from \"./quick-add-popover\";\n\ninterface WeekViewProps {\n  weekStart: Date;\n  getData: (year: number, month: number, day: number) => DayData;\n  onUpdate: (year: number, month: number, day: number, data: DayData) => void;\n  selectedDotColor: DotColor;\n  onDayClick?: (date: Date) => void;\n}\n\nexport function WeekView({\n  weekStart,\n  getData,\n  onUpdate,\n  selectedDotColor,\n  onDayClick,\n}: WeekViewProps) {\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n\n  const days = Array.from({ length: 7 }, (_, i) => {\n    const d = new Date(weekStart);\n    d.setDate(d.getDate() + i);\n    return d;\n  });\n\n  return (\n    <div className=\"h-full flex border-l border-t border-border\">\n      {days.map((date, i) => {\n        const isToday = date.getTime() === today.getTime();\n        const dayData = getData(date.getFullYear(), date.getMonth(), date.getDate());\n\n        return (\n          <WeekDayColumn\n            key={i}\n            date={date}\n            data={dayData}\n            isToday={isToday}\n            onUpdate={(data) => onUpdate(date.getFullYear(), date.getMonth(), date.getDate(), data)}\n            selectedDotColor={selectedDotColor}\n            onDayClick={onDayClick}\n          />\n        );\n      })}\n    </div>\n  );\n}\n\ninterface WeekDayColumnProps {\n  date: Date;\n  data: DayData;\n  isToday: boolean;\n  onUpdate: (data: DayData) => void;\n  selectedDotColor: DotColor;\n  onDayClick?: (date: Date) => void;\n}\n\nfunction WeekDayColumn({\n  date,\n  data,\n  isToday,\n  onDayClick,\n  onUpdate,\n}: WeekDayColumnProps) {\n  const [colorPickerPos, setColorPickerPos] = useState<{ x: number; y: number } | null>(null);\n  \n  const timeBlocks = data.timeBlocks || [];\n  // Sort by start time\n  const sortedBlocks = [...timeBlocks].sort((a, b) => a.startTime.localeCompare(b.startTime));\n  \n  // Get day color info\n  const dayColorInfo = data.dayColor ? DAY_COLORS[data.dayColor] : null;\n\n  const handleContextMenu = (e: React.MouseEvent) => {\n    e.preventDefault();\n    setColorPickerPos({ x: e.clientX, y: e.clientY });\n  };\n\n  const handleColorChange = (color: DayColorCode) => {\n    onUpdate({ ...data, dayColor: color });\n    setColorPickerPos(null);\n  };\n\n  // Day header content (for adding new blocks)\n  const dayHeader = (\n    <div\n      className={cn(\n        \"flex flex-col items-center py-2 border-b border-border cursor-pointer flex-shrink-0\",\n        \"hover:bg-accent/30 transition-colors\",\n        !dayColorInfo && isToday && \"bg-accent/50\"\n      )}\n    >\n      <span className=\"text-[10px] uppercase tracking-wider text-muted-foreground\">\n        {WEEKDAYS[date.getDay()]}\n      </span>\n      <span className={cn(\n        \"text-lg font-light\",\n        isToday ? \"text-foreground\" : \"text-foreground/80\"\n      )}>\n        {date.getDate()}\n      </span>\n      <span className=\"text-[9px] text-muted-foreground\">\n        {MONTH_NAMES_SHORT[date.getMonth()]}\n      </span>\n    </div>\n  );\n\n  // Empty state content (for adding new blocks)\n  const emptyState = (\n    <div \n      className=\"flex-1 flex items-center justify-center cursor-pointer hover:bg-accent/20 transition-colors rounded\"\n    >\n      <span className=\"text-[10px] text-muted-foreground/50\">+ Add</span>\n    </div>\n  );\n\n  return (\n    <>\n      <div \n        onContextMenu={handleContextMenu}\n        className={cn(\n          \"flex-1 flex flex-col border-r border-border min-w-0\",\n          dayColorInfo && dayColorInfo.bgClass\n        )}\n      >\n        {/* Day header - wrapped in popover for quick add */}\n        <QuickAddPopover\n          date={date}\n          data={data}\n          onUpdate={onUpdate}\n          onViewFullDay={() => onDayClick?.(date)}\n        >\n          {dayHeader}\n        </QuickAddPopover>\n\n        {/* Time blocks as cards */}\n        <div className=\"flex-1 p-1.5 overflow-y-auto flex flex-col gap-1\">\n          {sortedBlocks.length > 0 ? (\n            sortedBlocks.map((block) => {\n              const cat = BLOCK_CATEGORIES[block.category];\n              // Block card content\n              const blockCard = (\n                <div\n                  className={cn(\n                    \"px-2 py-1.5 rounded border-l-2 cursor-pointer\",\n                    \"hover:opacity-80 transition-opacity\",\n                    cat?.bgClass || \"bg-muted/50\",\n                    cat?.borderClass || \"border-muted-foreground/50\"\n                  )}\n                >\n                  <div className=\"text-[10px] font-medium truncate\">\n                    {block.title || cat?.label || \"Event\"}\n                  </div>\n                  <div className=\"text-[9px] text-muted-foreground\">\n                    {formatTimeRange(block.startTime, block.endTime)}\n                  </div>\n                </div>\n              );\n\n              // Wrap each block in popover for editing\n              return (\n                <QuickAddPopover\n                  key={block.id}\n                  date={date}\n                  data={data}\n                  onUpdate={onUpdate}\n                  onViewFullDay={() => onDayClick?.(date)}\n                  editBlockId={block.id}\n                >\n                  {blockCard}\n                </QuickAddPopover>\n              );\n            })\n          ) : (\n            <QuickAddPopover\n              date={date}\n              data={data}\n              onUpdate={onUpdate}\n              onViewFullDay={() => onDayClick?.(date)}\n            >\n              {emptyState}\n            </QuickAddPopover>\n          )}\n        </div>\n      </div>\n      \n      {colorPickerPos && (\n        <DayColorPicker\n          currentColor={data.dayColor ?? null}\n          onColorChange={handleColorChange}\n          onClose={() => setColorPickerPos(null)}\n          position={colorPickerPos}\n          dateLabel={`${MONTH_NAMES_SHORT[date.getMonth()]} ${date.getDate()}`}\n        />\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2210, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/time-block-editor.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  type TimeBlock,\n  type TimeBlockCategory,\n  BLOCK_CATEGORIES,\n  DURATION_PRESETS,\n  generateId,\n  formatTimeRange,\n  addMinutesToTime,\n} from \"./calendar-types\";\n\ninterface TimeBlockEditorProps {\n  blocks: TimeBlock[];\n  onUpdate: (blocks: TimeBlock[]) => void;\n}\n\nconst CATEGORY_KEYS = Object.keys(BLOCK_CATEGORIES) as TimeBlockCategory[];\n\n// Get next available start time based on existing blocks\nfunction getNextAvailableTime(blocks: TimeBlock[]): string {\n  if (blocks.length === 0) return \"09:00\";\n  const sorted = [...blocks].sort((a, b) => a.endTime.localeCompare(b.endTime));\n  const lastEnd = sorted[sorted.length - 1].endTime;\n  return lastEnd;\n}\n\nexport function TimeBlockEditor({ blocks, onUpdate }: TimeBlockEditorProps) {\n  const [isAdding, setIsAdding] = useState(false);\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [selectedDuration, setSelectedDuration] = useState(60); // Default 1 hour\n  const [newBlock, setNewBlock] = useState<Partial<TimeBlock>>(() => {\n    const start = getNextAvailableTime(blocks);\n    return {\n      startTime: start,\n      endTime: addMinutesToTime(start, 60),\n      title: \"\",\n      category: \"focus\",\n    };\n  });\n\n  const openAddForm = () => {\n    const start = getNextAvailableTime(blocks);\n    setNewBlock({\n      startTime: start,\n      endTime: addMinutesToTime(start, selectedDuration),\n      title: \"\",\n      category: \"focus\",\n    });\n    setIsAdding(true);\n  };\n\n  const handleDurationChange = (minutes: number) => {\n    setSelectedDuration(minutes);\n    setNewBlock((prev) => ({\n      ...prev,\n      endTime: addMinutesToTime(prev.startTime || \"09:00\", minutes),\n    }));\n  };\n\n  const handleStartTimeChange = (startTime: string) => {\n    setNewBlock((prev) => ({\n      ...prev,\n      startTime,\n      endTime: addMinutesToTime(startTime, selectedDuration),\n    }));\n  };\n\n  const addBlock = () => {\n    if (!newBlock.title?.trim()) return;\n    const block: TimeBlock = {\n      id: generateId(),\n      startTime: newBlock.startTime || \"09:00\",\n      endTime: newBlock.endTime || \"10:00\",\n      title: newBlock.title,\n      category: newBlock.category || \"focus\",\n    };\n    onUpdate([...blocks, block].sort((a, b) => a.startTime.localeCompare(b.startTime)));\n    setIsAdding(false);\n  };\n\n  const updateBlock = (id: string, updates: Partial<TimeBlock>) => {\n    onUpdate(\n      blocks\n        .map((b) => (b.id === id ? { ...b, ...updates } : b))\n        .sort((a, b) => a.startTime.localeCompare(b.startTime))\n    );\n  };\n\n  const deleteBlock = (id: string) => {\n    onUpdate(blocks.filter((b) => b.id !== id));\n    setEditingId(null);\n  };\n\n  return (\n    <div className=\"space-y-1.5\">\n      {/* Existing blocks */}\n      {blocks.map((block) => {\n        const cat = BLOCK_CATEGORIES[block.category];\n\n        if (editingId === block.id) {\n          return (\n            <div key={block.id} className=\"flex flex-col gap-2 p-2 border border-dashed border-border rounded-sm\">\n              <input\n                type=\"text\"\n                value={block.title}\n                onChange={(e) => updateBlock(block.id, { title: e.target.value })}\n                className=\"text-xs bg-transparent border-b border-border px-1 py-1 outline-none\"\n                autoFocus\n              />\n              <div className=\"flex gap-1 items-center\">\n                <input\n                  type=\"time\"\n                  value={block.startTime}\n                  onChange={(e) => updateBlock(block.id, { startTime: e.target.value })}\n                  className=\"w-[4.5rem] text-[10px] bg-transparent border border-border px-1 py-0.5 rounded-sm\"\n                />\n                <span className=\"text-[10px] text-muted-foreground\">to</span>\n                <input\n                  type=\"time\"\n                  value={block.endTime}\n                  onChange={(e) => updateBlock(block.id, { endTime: e.target.value })}\n                  className=\"w-[4.5rem] text-[10px] bg-transparent border border-border px-1 py-0.5 rounded-sm\"\n                />\n              </div>\n              <div className=\"flex gap-1 flex-wrap\">\n                {CATEGORY_KEYS.map((catKey) => {\n                  const c = BLOCK_CATEGORIES[catKey];\n                  return (\n                    <button\n                      key={catKey}\n                      type=\"button\"\n                      onClick={() => updateBlock(block.id, { category: catKey })}\n                      className={cn(\n                        \"text-[8px] uppercase tracking-wider px-1.5 py-0.5 border rounded-sm transition-colors\",\n                        block.category === catKey\n                          ? cn(c.bgClass, c.borderClass)\n                          : \"bg-transparent text-muted-foreground border-border hover:border-foreground/30\"\n                      )}\n                    >\n                      {c.label}\n                    </button>\n                  );\n                })}\n              </div>\n              <div className=\"flex gap-1 mt-1\">\n                <button\n                  type=\"button\"\n                  onClick={() => setEditingId(null)}\n                  className=\"text-[9px] uppercase tracking-wider px-2 py-0.5 bg-muted hover:bg-muted/80 rounded-sm\"\n                >\n                  Done\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => deleteBlock(block.id)}\n                  className=\"text-[9px] uppercase tracking-wider px-2 py-0.5 text-destructive hover:bg-destructive/10 rounded-sm\"\n                >\n                  Delete\n                </button>\n              </div>\n            </div>\n          );\n        }\n\n        // Fallback for legacy categories\n        if (!cat) {\n          return (\n            <div\n              key={block.id}\n              onClick={() => setEditingId(block.id)}\n              className=\"cursor-pointer px-2 py-1.5 border-l-2 rounded-r-sm bg-muted/50 border-muted-foreground/50 hover:bg-muted/70 transition-colors\"\n            >\n              <div className=\"text-[10px] font-medium truncate\">{block.title}</div>\n              <div className=\"text-[9px] text-muted-foreground\">\n                {formatTimeRange(block.startTime, block.endTime)}\n              </div>\n            </div>\n          );\n        }\n\n        return (\n          <div\n            key={block.id}\n            onClick={() => setEditingId(block.id)}\n            className={cn(\n              \"cursor-pointer px-3 py-2 sm:px-2 sm:py-1.5 border-l-2 rounded-r-sm hover:opacity-80 transition-opacity active:opacity-70\",\n              cat.bgClass,\n              cat.borderClass\n            )}\n          >\n            <div className=\"text-xs sm:text-[10px] font-medium truncate\">{block.title}</div>\n            <div className=\"text-[10px] sm:text-[9px] text-muted-foreground\">\n              {formatTimeRange(block.startTime, block.endTime)}\n            </div>\n          </div>\n        );\n      })}\n\n      {/* Add new block form */}\n      {isAdding ? (\n        <div className=\"flex flex-col gap-2.5 p-2 border border-dashed border-border rounded-sm\">\n          {/* Title input */}\n          <input\n            type=\"text\"\n            value={newBlock.title}\n            onChange={(e) => setNewBlock({ ...newBlock, title: e.target.value })}\n            placeholder=\"What are you doing?\"\n            className=\"text-xs bg-transparent border-b border-border px-1 py-1 placeholder:text-muted-foreground/50 outline-none\"\n            autoFocus\n            onKeyDown={(e) => e.key === \"Enter\" && addBlock()}\n          />\n\n          {/* Quick duration presets */}\n          <div className=\"flex flex-col gap-1.5\">\n            <span className=\"text-[9px] uppercase tracking-wider text-muted-foreground\">Duration</span>\n            <div className=\"flex gap-1 flex-wrap\">\n              {DURATION_PRESETS.map((preset) => (\n                <button\n                  key={preset.minutes}\n                  type=\"button\"\n                  onClick={() => handleDurationChange(preset.minutes)}\n                  className={cn(\n                    \"text-[9px] px-2 py-0.5 border rounded-sm transition-colors\",\n                    selectedDuration === preset.minutes\n                      ? \"bg-foreground text-background border-foreground\"\n                      : \"bg-transparent text-muted-foreground border-border hover:border-foreground/30\"\n                  )}\n                >\n                  {preset.label}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Start time with auto end time */}\n          <div className=\"flex gap-2 items-center\">\n            <div className=\"flex flex-col gap-0.5\">\n              <span className=\"text-[9px] uppercase tracking-wider text-muted-foreground\">Start</span>\n              <input\n                type=\"time\"\n                value={newBlock.startTime}\n                onChange={(e) => handleStartTimeChange(e.target.value)}\n                className=\"w-[5rem] text-[10px] bg-transparent border border-border px-1.5 py-1 rounded-sm\"\n              />\n            </div>\n            <span className=\"text-muted-foreground mt-4\">→</span>\n            <div className=\"flex flex-col gap-0.5\">\n              <span className=\"text-[9px] uppercase tracking-wider text-muted-foreground\">End</span>\n              <span className=\"text-[10px] px-1.5 py-1 text-muted-foreground\">\n                {newBlock.endTime && formatTimeRange(newBlock.startTime!, newBlock.endTime).split('-')[1]}\n              </span>\n            </div>\n          </div>\n\n          {/* Category selector */}\n          <div className=\"flex flex-col gap-1.5\">\n            <span className=\"text-[9px] uppercase tracking-wider text-muted-foreground\">Category</span>\n            <div className=\"flex gap-1 flex-wrap\">\n              {CATEGORY_KEYS.map((catKey) => {\n                const c = BLOCK_CATEGORIES[catKey];\n                return (\n                  <button\n                    key={catKey}\n                    type=\"button\"\n                    onClick={() => setNewBlock({ ...newBlock, category: catKey })}\n                    className={cn(\n                      \"text-[8px] uppercase tracking-wider px-1.5 py-0.5 border rounded-sm transition-colors\",\n                      newBlock.category === catKey\n                        ? cn(c.bgClass, c.borderClass)\n                        : \"bg-transparent text-muted-foreground border-border hover:border-foreground/30\"\n                    )}\n                  >\n                    {c.label}\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex gap-1 pt-1\">\n            <button\n              type=\"button\"\n              onClick={addBlock}\n              disabled={!newBlock.title?.trim()}\n              className=\"text-[10px] uppercase tracking-wider px-3 py-1 bg-foreground text-background hover:bg-foreground/90 disabled:opacity-50 disabled:cursor-not-allowed rounded-sm\"\n            >\n              Add Block\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setIsAdding(false)}\n              className=\"text-[10px] uppercase tracking-wider px-3 py-1 text-muted-foreground hover:text-foreground rounded-sm\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      ) : (\n        <button\n          type=\"button\"\n          onClick={openAddForm}\n          className=\"w-full text-[11px] sm:text-[10px] uppercase tracking-wider text-muted-foreground hover:text-foreground py-3 sm:py-2 border border-dashed border-border hover:border-foreground/30 active:bg-accent/30 transition-colors rounded-sm\"\n        >\n          + Add Time Block\n        </button>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAmBA,MAAM,gBAAgB,OAAO,IAAI,CAAC,sJAAgB;;AAElD,yDAAyD;AACzD,SAAS,qBAAqB,MAAmB;IAC/C,IAAI,OAAO,MAAM,KAAK,GAAG,OAAO;IAChC,MAAM,SAAS;WAAI;KAAO,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,OAAO,CAAC,aAAa,CAAC,EAAE,OAAO;IAC3E,MAAM,UAAU,MAAM,CAAC,OAAO,MAAM,GAAG,EAAE,CAAC,OAAO;IACjD,OAAO;AACT;AAEO,SAAS,gBAAgB,EAAE,MAAM,EAAE,QAAQ,EAAwB;;IACxE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,ySAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,ySAAQ,EAAgB;IAC1D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,ySAAQ,EAAC,KAAK,iBAAiB;IAC/E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,ySAAQ;oCAAqB;YAC3D,MAAM,QAAQ,qBAAqB;YACnC,OAAO;gBACL,WAAW;gBACX,SAAS,IAAA,sJAAgB,EAAC,OAAO;gBACjC,OAAO;gBACP,UAAU;YACZ;QACF;;IAEA,MAAM,cAAc;QAClB,MAAM,QAAQ,qBAAqB;QACnC,YAAY;YACV,WAAW;YACX,SAAS,IAAA,sJAAgB,EAAC,OAAO;YACjC,OAAO;YACP,UAAU;QACZ;QACA,YAAY;IACd;IAEA,MAAM,uBAAuB,CAAC;QAC5B,oBAAoB;QACpB,YAAY,CAAC,OAAS,CAAC;gBACrB,GAAG,IAAI;gBACP,SAAS,IAAA,sJAAgB,EAAC,KAAK,SAAS,IAAI,SAAS;YACvD,CAAC;IACH;IAEA,MAAM,wBAAwB,CAAC;QAC7B,YAAY,CAAC,OAAS,CAAC;gBACrB,GAAG,IAAI;gBACP;gBACA,SAAS,IAAA,sJAAgB,EAAC,WAAW;YACvC,CAAC;IACH;IAEA,MAAM,WAAW;QACf,IAAI,CAAC,SAAS,KAAK,EAAE,QAAQ;QAC7B,MAAM,QAAmB;YACvB,IAAI,IAAA,gJAAU;YACd,WAAW,SAAS,SAAS,IAAI;YACjC,SAAS,SAAS,OAAO,IAAI;YAC7B,OAAO,SAAS,KAAK;YACrB,UAAU,SAAS,QAAQ,IAAI;QACjC;QACA,SAAS;eAAI;YAAQ;SAAM,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,CAAC,aAAa,CAAC,EAAE,SAAS;QAChF,YAAY;IACd;IAEA,MAAM,cAAc,CAAC,IAAY;QAC/B,SACE,OACG,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK;gBAAE,GAAG,CAAC;gBAAE,GAAG,OAAO;YAAC,IAAI,GACjD,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,CAAC,aAAa,CAAC,EAAE,SAAS;IAE3D;IAEA,MAAM,cAAc,CAAC;QACnB,SAAS,OAAO,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QACvC,aAAa;IACf;IAEA,qBACE,6TAAC;QAAI,WAAU;;YAEZ,OAAO,GAAG,CAAC,CAAC;gBACX,MAAM,MAAM,sJAAgB,CAAC,MAAM,QAAQ,CAAC;gBAE5C,IAAI,cAAc,MAAM,EAAE,EAAE;oBAC1B,qBACE,6TAAC;wBAAmB,WAAU;;0CAC5B,6TAAC;gCACC,MAAK;gCACL,OAAO,MAAM,KAAK;gCAClB,UAAU,CAAC,IAAM,YAAY,MAAM,EAAE,EAAE;wCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;oCAAC;gCAC/D,WAAU;gCACV,SAAS;;;;;;0CAEX,6TAAC;gCAAI,WAAU;;kDACb,6TAAC;wCACC,MAAK;wCACL,OAAO,MAAM,SAAS;wCACtB,UAAU,CAAC,IAAM,YAAY,MAAM,EAAE,EAAE;gDAAE,WAAW,EAAE,MAAM,CAAC,KAAK;4CAAC;wCACnE,WAAU;;;;;;kDAEZ,6TAAC;wCAAK,WAAU;kDAAoC;;;;;;kDACpD,6TAAC;wCACC,MAAK;wCACL,OAAO,MAAM,OAAO;wCACpB,UAAU,CAAC,IAAM,YAAY,MAAM,EAAE,EAAE;gDAAE,SAAS,EAAE,MAAM,CAAC,KAAK;4CAAC;wCACjE,WAAU;;;;;;;;;;;;0CAGd,6TAAC;gCAAI,WAAU;0CACZ,cAAc,GAAG,CAAC,CAAC;oCAClB,MAAM,IAAI,sJAAgB,CAAC,OAAO;oCAClC,qBACE,6TAAC;wCAEC,MAAK;wCACL,SAAS,IAAM,YAAY,MAAM,EAAE,EAAE;gDAAE,UAAU;4CAAO;wCACxD,WAAW,IAAA,qHAAE,EACX,yFACA,MAAM,QAAQ,KAAK,SACf,IAAA,qHAAE,EAAC,EAAE,OAAO,EAAE,EAAE,WAAW,IAC3B;kDAGL,EAAE,KAAK;uCAVH;;;;;gCAaX;;;;;;0CAEF,6TAAC;gCAAI,WAAU;;kDACb,6TAAC;wCACC,MAAK;wCACL,SAAS,IAAM,aAAa;wCAC5B,WAAU;kDACX;;;;;;kDAGD,6TAAC;wCACC,MAAK;wCACL,SAAS,IAAM,YAAY,MAAM,EAAE;wCACnC,WAAU;kDACX;;;;;;;;;;;;;uBAvDK,MAAM,EAAE;;;;;gBA6DtB;gBAEA,iCAAiC;gBACjC,IAAI,CAAC,KAAK;oBACR,qBACE,6TAAC;wBAEC,SAAS,IAAM,aAAa,MAAM,EAAE;wBACpC,WAAU;;0CAEV,6TAAC;gCAAI,WAAU;0CAAoC,MAAM,KAAK;;;;;;0CAC9D,6TAAC;gCAAI,WAAU;0CACZ,IAAA,qJAAe,EAAC,MAAM,SAAS,EAAE,MAAM,OAAO;;;;;;;uBAN5C,MAAM,EAAE;;;;;gBAUnB;gBAEA,qBACE,6TAAC;oBAEC,SAAS,IAAM,aAAa,MAAM,EAAE;oBACpC,WAAW,IAAA,qHAAE,EACX,4HACA,IAAI,OAAO,EACX,IAAI,WAAW;;sCAGjB,6TAAC;4BAAI,WAAU;sCAA+C,MAAM,KAAK;;;;;;sCACzE,6TAAC;4BAAI,WAAU;sCACZ,IAAA,qJAAe,EAAC,MAAM,SAAS,EAAE,MAAM,OAAO;;;;;;;mBAV5C,MAAM,EAAE;;;;;YAcnB;YAGC,yBACC,6TAAC;gBAAI,WAAU;;kCAEb,6TAAC;wBACC,MAAK;wBACL,OAAO,SAAS,KAAK;wBACrB,UAAU,CAAC,IAAM,YAAY;gCAAE,GAAG,QAAQ;gCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;4BAAC;wBAClE,aAAY;wBACZ,WAAU;wBACV,SAAS;wBACT,WAAW,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;;;;;;kCAIzC,6TAAC;wBAAI,WAAU;;0CACb,6TAAC;gCAAK,WAAU;0CAA4D;;;;;;0CAC5E,6TAAC;gCAAI,WAAU;0CACZ,sJAAgB,CAAC,GAAG,CAAC,CAAC,uBACrB,6TAAC;wCAEC,MAAK;wCACL,SAAS,IAAM,qBAAqB,OAAO,OAAO;wCAClD,WAAW,IAAA,qHAAE,EACX,8DACA,qBAAqB,OAAO,OAAO,GAC/B,oDACA;kDAGL,OAAO,KAAK;uCAVR,OAAO,OAAO;;;;;;;;;;;;;;;;kCAiB3B,6TAAC;wBAAI,WAAU;;0CACb,6TAAC;gCAAI,WAAU;;kDACb,6TAAC;wCAAK,WAAU;kDAA4D;;;;;;kDAC5E,6TAAC;wCACC,MAAK;wCACL,OAAO,SAAS,SAAS;wCACzB,UAAU,CAAC,IAAM,sBAAsB,EAAE,MAAM,CAAC,KAAK;wCACrD,WAAU;;;;;;;;;;;;0CAGd,6TAAC;gCAAK,WAAU;0CAA6B;;;;;;0CAC7C,6TAAC;gCAAI,WAAU;;kDACb,6TAAC;wCAAK,WAAU;kDAA4D;;;;;;kDAC5E,6TAAC;wCAAK,WAAU;kDACb,SAAS,OAAO,IAAI,IAAA,qJAAe,EAAC,SAAS,SAAS,EAAG,SAAS,OAAO,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE;;;;;;;;;;;;;;;;;;kCAM/F,6TAAC;wBAAI,WAAU;;0CACb,6TAAC;gCAAK,WAAU;0CAA4D;;;;;;0CAC5E,6TAAC;gCAAI,WAAU;0CACZ,cAAc,GAAG,CAAC,CAAC;oCAClB,MAAM,IAAI,sJAAgB,CAAC,OAAO;oCAClC,qBACE,6TAAC;wCAEC,MAAK;wCACL,SAAS,IAAM,YAAY;gDAAE,GAAG,QAAQ;gDAAE,UAAU;4CAAO;wCAC3D,WAAW,IAAA,qHAAE,EACX,yFACA,SAAS,QAAQ,KAAK,SAClB,IAAA,qHAAE,EAAC,EAAE,OAAO,EAAE,EAAE,WAAW,IAC3B;kDAGL,EAAE,KAAK;uCAVH;;;;;gCAaX;;;;;;;;;;;;kCAKJ,6TAAC;wBAAI,WAAU;;0CACb,6TAAC;gCACC,MAAK;gCACL,SAAS;gCACT,UAAU,CAAC,SAAS,KAAK,EAAE;gCAC3B,WAAU;0CACX;;;;;;0CAGD,6TAAC;gCACC,MAAK;gCACL,SAAS,IAAM,YAAY;gCAC3B,WAAU;0CACX;;;;;;;;;;;;;;;;;qCAML,6TAAC;gBACC,MAAK;gBACL,SAAS;gBACT,WAAU;0BACX;;;;;;;;;;;;AAMT;GA3RgB;MAAA"}},
    {"offset": {"line": 2703, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/content-editor.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\"\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  type ContentBlock,\n  type ChecklistItem,\n  type BulletItem,\n  type CodeData,\n  type LinkData,\n  generateId,\n} from \"./calendar-types\";\n\ninterface ContentEditorProps {\n  blocks: ContentBlock[];\n  onUpdate: (blocks: ContentBlock[]) => void;\n}\n\nconst BLOCK_TYPES = [\n  { type: \"text\" as const, label: \"Text\", icon: \"T\" },\n  { type: \"checklist\" as const, label: \"Checklist\", icon: \"☑\" },\n  { type: \"bullets\" as const, label: \"Bullets\", icon: \"•\" },\n  { type: \"heading\" as const, label: \"Heading\", icon: \"H\" },\n  { type: \"code\" as const, label: \"Code\", icon: \"</>\" },\n  { type: \"link\" as const, label: \"Link\", icon: \"🔗\" },\n  { type: \"divider\" as const, label: \"Divider\", icon: \"—\" },\n];\n\nexport function ContentEditor({ blocks, onUpdate }: ContentEditorProps) {\n  const addBlock = (type: ContentBlock[\"type\"]) => {\n    let content: ContentBlock[\"content\"];\n    switch (type) {\n      case \"text\":\n      case \"heading\":\n        content = \"\";\n        break;\n      case \"checklist\":\n        content = [{ id: generateId(), text: \"\", checked: false }];\n        break;\n      case \"bullets\":\n        content = [{ id: generateId(), text: \"\" }];\n        break;\n      case \"code\":\n        content = { language: \"javascript\", code: \"\" };\n        break;\n      case \"link\":\n        content = { url: \"\", title: \"\", description: \"\" };\n        break;\n      case \"divider\":\n        content = \"\";\n        break;\n      default:\n        content = \"\";\n    }\n    const newBlock: ContentBlock = { id: generateId(), type, content };\n    onUpdate([...blocks, newBlock]);\n  };\n\n  const updateBlock = (id: string, content: ContentBlock[\"content\"]) => {\n    onUpdate(blocks.map((b) => (b.id === id ? { ...b, content } : b)));\n  };\n\n  const deleteBlock = (id: string) => {\n    onUpdate(blocks.filter((b) => b.id !== id));\n  };\n\n  const moveBlock = (id: string, direction: \"up\" | \"down\") => {\n    const index = blocks.findIndex((b) => b.id === id);\n    if (direction === \"up\" && index > 0) {\n      const newBlocks = [...blocks];\n      [newBlocks[index - 1], newBlocks[index]] = [newBlocks[index], newBlocks[index - 1]];\n      onUpdate(newBlocks);\n    } else if (direction === \"down\" && index < blocks.length - 1) {\n      const newBlocks = [...blocks];\n      [newBlocks[index], newBlocks[index + 1]] = [newBlocks[index + 1], newBlocks[index]];\n      onUpdate(newBlocks);\n    }\n  };\n\n  return (\n    <div className=\"space-y-3\">\n      {blocks.map((block, index) => (\n        <ContentBlockItem\n          key={block.id}\n          block={block}\n          onUpdate={(content) => updateBlock(block.id, content)}\n          onDelete={() => deleteBlock(block.id)}\n          onMoveUp={index > 0 ? () => moveBlock(block.id, \"up\") : undefined}\n          onMoveDown={index < blocks.length - 1 ? () => moveBlock(block.id, \"down\") : undefined}\n        />\n      ))}\n\n      {/* Add block buttons */}\n      <div className=\"flex gap-1.5 flex-wrap pt-2\">\n        {BLOCK_TYPES.map(({ type, label, icon }) => (\n          <button\n            key={type}\n            type=\"button\"\n            onClick={() => addBlock(type)}\n            className=\"flex items-center gap-1.5 text-[9px] uppercase tracking-wider text-muted-foreground hover:text-foreground px-2 py-1.5 border border-dashed border-border hover:border-foreground/30 transition-colors rounded-sm\"\n          >\n            <span className=\"text-[10px]\">{icon}</span>\n            {label}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface ContentBlockItemProps {\n  block: ContentBlock;\n  onUpdate: (content: ContentBlock[\"content\"]) => void;\n  onDelete: () => void;\n  onMoveUp?: () => void;\n  onMoveDown?: () => void;\n}\n\nfunction ContentBlockItem({ block, onUpdate, onDelete, onMoveUp, onMoveDown }: ContentBlockItemProps) {\n  const BlockControls = () => (\n    <div className=\"absolute -left-6 top-0 flex flex-col gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity\">\n      {onMoveUp && (\n        <button\n          type=\"button\"\n          onClick={onMoveUp}\n          className=\"text-[9px] text-muted-foreground hover:text-foreground w-4 h-4 flex items-center justify-center\"\n        >\n          ↑\n        </button>\n      )}\n      {onMoveDown && (\n        <button\n          type=\"button\"\n          onClick={onMoveDown}\n          className=\"text-[9px] text-muted-foreground hover:text-foreground w-4 h-4 flex items-center justify-center\"\n        >\n          ↓\n        </button>\n      )}\n    </div>\n  );\n\n  if (block.type === \"text\") {\n    return (\n      <div className=\"group relative pl-6\">\n        <BlockControls />\n        <TextBlockEditor\n          content={block.content as string}\n          onUpdate={onUpdate}\n          onDelete={onDelete}\n        />\n      </div>\n    );\n  }\n\n  if (block.type === \"heading\") {\n    return (\n      <div className=\"group relative pl-6\">\n        <BlockControls />\n        <HeadingBlockEditor\n          content={block.content as string}\n          onUpdate={onUpdate}\n          onDelete={onDelete}\n        />\n      </div>\n    );\n  }\n\n  if (block.type === \"checklist\") {\n    return (\n      <div className=\"group relative pl-6\">\n        <BlockControls />\n        <ChecklistEditor\n          items={block.content as ChecklistItem[]}\n          onUpdate={onUpdate}\n          onDelete={onDelete}\n        />\n      </div>\n    );\n  }\n\n  if (block.type === \"bullets\") {\n    return (\n      <div className=\"group relative pl-6\">\n        <BlockControls />\n        <BulletListEditor\n          items={block.content as BulletItem[]}\n          onUpdate={onUpdate}\n          onDelete={onDelete}\n        />\n      </div>\n    );\n  }\n\n  if (block.type === \"code\") {\n    return (\n      <div className=\"group relative pl-6\">\n        <BlockControls />\n        <CodeBlockEditor\n          data={block.content as CodeData}\n          onUpdate={onUpdate}\n          onDelete={onDelete}\n        />\n      </div>\n    );\n  }\n\n  if (block.type === \"link\") {\n    return (\n      <div className=\"group relative pl-6\">\n        <BlockControls />\n        <LinkBlockEditor\n          data={block.content as LinkData}\n          onUpdate={onUpdate}\n          onDelete={onDelete}\n        />\n      </div>\n    );\n  }\n\n  if (block.type === \"divider\") {\n    return (\n      <div className=\"group relative pl-6\">\n        <BlockControls />\n        <div className=\"relative py-2\">\n          <hr className=\"border-border\" />\n          <button\n            type=\"button\"\n            onClick={onDelete}\n            className=\"absolute top-1/2 right-0 -translate-y-1/2 text-[9px] text-muted-foreground opacity-0 group-hover:opacity-100 hover:text-destructive transition-opacity\"\n          >\n            Remove\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n}\n\n// Text Block\nfunction TextBlockEditor({\n  content,\n  onUpdate,\n  onDelete,\n}: {\n  content: string;\n  onUpdate: (content: string) => void;\n  onDelete: () => void;\n}) {\n  const [value, setValue] = useState(content);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  useEffect(() => {\n    setValue(content);\n  }, [content]);\n\n  useEffect(() => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = \"auto\";\n      textarea.style.height = `${textarea.scrollHeight}px`;\n    }\n  }, [value]);\n\n  return (\n    <div className=\"relative\">\n      <textarea\n        ref={textareaRef}\n        value={value}\n        onChange={(e) => setValue(e.target.value)}\n        onBlur={() => onUpdate(value)}\n        placeholder=\"Write something...\"\n        className=\"w-full text-sm leading-relaxed bg-transparent text-foreground placeholder:text-muted-foreground/50 outline-none resize-none min-h-[2rem]\"\n        rows={1}\n      />\n      <button\n        type=\"button\"\n        onClick={onDelete}\n        className=\"absolute top-0 right-0 text-[9px] text-muted-foreground opacity-0 group-hover:opacity-100 hover:text-destructive transition-opacity\"\n      >\n        Remove\n      </button>\n    </div>\n  );\n}\n\n// Heading Block\nfunction HeadingBlockEditor({\n  content,\n  onUpdate,\n  onDelete,\n}: {\n  content: string;\n  onUpdate: (content: string) => void;\n  onDelete: () => void;\n}) {\n  const [value, setValue] = useState(content);\n\n  useEffect(() => {\n    setValue(content);\n  }, [content]);\n\n  return (\n    <div className=\"relative\">\n      <input\n        type=\"text\"\n        value={value}\n        onChange={(e) => setValue(e.target.value)}\n        onBlur={() => onUpdate(value)}\n        placeholder=\"Heading...\"\n        className=\"w-full text-base font-medium bg-transparent text-foreground placeholder:text-muted-foreground/50 outline-none\"\n      />\n      <button\n        type=\"button\"\n        onClick={onDelete}\n        className=\"absolute top-0 right-0 text-[9px] text-muted-foreground opacity-0 group-hover:opacity-100 hover:text-destructive transition-opacity\"\n      >\n        Remove\n      </button>\n    </div>\n  );\n}\n\n// Checklist Editor\nfunction ChecklistEditor({\n  items,\n  onUpdate,\n  onDelete,\n}: {\n  items: ChecklistItem[];\n  onUpdate: (items: ChecklistItem[]) => void;\n  onDelete: () => void;\n}) {\n  const inputRefs = useRef<Map<string, HTMLInputElement>>(new Map());\n\n  const updateItem = (id: string, updates: Partial<ChecklistItem>) => {\n    onUpdate(items.map((item) => (item.id === id ? { ...item, ...updates } : item)));\n  };\n\n  const addItem = (afterId?: string) => {\n    const newItem: ChecklistItem = { id: generateId(), text: \"\", checked: false };\n    if (afterId) {\n      const index = items.findIndex((item) => item.id === afterId);\n      const newItems = [...items];\n      newItems.splice(index + 1, 0, newItem);\n      onUpdate(newItems);\n    } else {\n      onUpdate([...items, newItem]);\n    }\n    setTimeout(() => {\n      inputRefs.current.get(newItem.id)?.focus();\n    }, 0);\n  };\n\n  const deleteItem = (id: string) => {\n    if (items.length === 1) {\n      onDelete();\n      return;\n    }\n    const index = items.findIndex((item) => item.id === id);\n    const prevItem = items[index - 1];\n    onUpdate(items.filter((item) => item.id !== id));\n    if (prevItem) {\n      setTimeout(() => {\n        inputRefs.current.get(prevItem.id)?.focus();\n      }, 0);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent, item: ChecklistItem) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      addItem(item.id);\n    } else if (e.key === \"Backspace\" && item.text === \"\") {\n      e.preventDefault();\n      deleteItem(item.id);\n    }\n  };\n\n  return (\n    <div className=\"relative space-y-1\">\n      {items.map((item) => (\n        <div key={item.id} className=\"flex items-start gap-2\">\n          <button\n            type=\"button\"\n            onClick={() => updateItem(item.id, { checked: !item.checked })}\n            className={cn(\n              \"w-3.5 h-3.5 mt-0.5 border flex-shrink-0 flex items-center justify-center transition-colors rounded-sm\",\n              item.checked\n                ? \"bg-foreground border-foreground\"\n                : \"border-border hover:border-foreground/50\"\n            )}\n          >\n            {item.checked && (\n              <svg width=\"8\" height=\"8\" viewBox=\"0 0 8 8\" fill=\"none\" className=\"text-background\">\n                <path d=\"M1 4L3 6L7 2\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n              </svg>\n            )}\n          </button>\n          <input\n            ref={(el) => {\n              if (el) inputRefs.current.set(item.id, el);\n            }}\n            type=\"text\"\n            value={item.text}\n            onChange={(e) => updateItem(item.id, { text: e.target.value })}\n            onKeyDown={(e) => handleKeyDown(e, item)}\n            placeholder=\"To do...\"\n            className={cn(\n              \"flex-1 text-sm bg-transparent outline-none placeholder:text-muted-foreground/50\",\n              item.checked && \"line-through text-muted-foreground\"\n            )}\n          />\n        </div>\n      ))}\n      <button\n        type=\"button\"\n        onClick={onDelete}\n        className=\"absolute top-0 right-0 text-[9px] text-muted-foreground opacity-0 group-hover:opacity-100 hover:text-destructive transition-opacity\"\n      >\n        Remove\n      </button>\n    </div>\n  );\n}\n\n// Bullet List Editor\nfunction BulletListEditor({\n  items,\n  onUpdate,\n  onDelete,\n}: {\n  items: BulletItem[];\n  onUpdate: (items: BulletItem[]) => void;\n  onDelete: () => void;\n}) {\n  const inputRefs = useRef<Map<string, HTMLInputElement>>(new Map());\n\n  const updateItem = (id: string, text: string) => {\n    onUpdate(items.map((item) => (item.id === id ? { ...item, text } : item)));\n  };\n\n  const addItem = (afterId?: string) => {\n    const newItem: BulletItem = { id: generateId(), text: \"\" };\n    if (afterId) {\n      const index = items.findIndex((item) => item.id === afterId);\n      const newItems = [...items];\n      newItems.splice(index + 1, 0, newItem);\n      onUpdate(newItems);\n    } else {\n      onUpdate([...items, newItem]);\n    }\n    setTimeout(() => {\n      inputRefs.current.get(newItem.id)?.focus();\n    }, 0);\n  };\n\n  const deleteItem = (id: string) => {\n    if (items.length === 1) {\n      onDelete();\n      return;\n    }\n    const index = items.findIndex((item) => item.id === id);\n    const prevItem = items[index - 1];\n    onUpdate(items.filter((item) => item.id !== id));\n    if (prevItem) {\n      setTimeout(() => {\n        inputRefs.current.get(prevItem.id)?.focus();\n      }, 0);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent, item: BulletItem) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      addItem(item.id);\n    } else if (e.key === \"Backspace\" && item.text === \"\") {\n      e.preventDefault();\n      deleteItem(item.id);\n    }\n  };\n\n  return (\n    <div className=\"relative space-y-1\">\n      {items.map((item) => (\n        <div key={item.id} className=\"flex items-start gap-2\">\n          <span className=\"w-1.5 h-1.5 mt-1.5 rounded-full bg-foreground/60 flex-shrink-0\" />\n          <input\n            ref={(el) => {\n              if (el) inputRefs.current.set(item.id, el);\n            }}\n            type=\"text\"\n            value={item.text}\n            onChange={(e) => updateItem(item.id, e.target.value)}\n            onKeyDown={(e) => handleKeyDown(e, item)}\n            placeholder=\"List item...\"\n            className=\"flex-1 text-sm bg-transparent outline-none placeholder:text-muted-foreground/50\"\n          />\n        </div>\n      ))}\n      <button\n        type=\"button\"\n        onClick={onDelete}\n        className=\"absolute top-0 right-0 text-[9px] text-muted-foreground opacity-0 group-hover:opacity-100 hover:text-destructive transition-opacity\"\n      >\n        Remove\n      </button>\n    </div>\n  );\n}\n\n// Code Block Editor\nconst CODE_LANGUAGES = [\n  { value: \"javascript\", label: \"JavaScript\" },\n  { value: \"typescript\", label: \"TypeScript\" },\n  { value: \"python\", label: \"Python\" },\n  { value: \"html\", label: \"HTML\" },\n  { value: \"css\", label: \"CSS\" },\n  { value: \"sql\", label: \"SQL\" },\n  { value: \"bash\", label: \"Bash\" },\n  { value: \"json\", label: \"JSON\" },\n  { value: \"markdown\", label: \"Markdown\" },\n  { value: \"plaintext\", label: \"Plain Text\" },\n];\n\nfunction CodeBlockEditor({\n  data,\n  onUpdate,\n  onDelete,\n}: {\n  data: CodeData;\n  onUpdate: (data: CodeData) => void;\n  onDelete: () => void;\n}) {\n  const [code, setCode] = useState(data.code);\n  const [language, setLanguage] = useState(data.language);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  useEffect(() => {\n    setCode(data.code);\n    setLanguage(data.language);\n  }, [data]);\n\n  useEffect(() => {\n    const textarea = textareaRef.current;\n    if (textarea && isExpanded) {\n      textarea.style.height = \"auto\";\n      textarea.style.height = `${Math.max(textarea.scrollHeight, 120)}px`;\n    }\n  }, [code, isExpanded]);\n\n  const handleBlur = () => {\n    onUpdate({ language, code });\n  };\n\n  // Get first line preview\n  const firstLine = code.split('\\n')[0] || '';\n  const lineCount = code.split('\\n').length;\n  const hasContent = code.trim().length > 0;\n\n  return (\n    <div className=\"relative border border-border rounded-sm overflow-hidden\">\n      {/* Header - always visible */}\n      <div \n        className=\"flex items-center justify-between px-2 py-1.5 bg-muted/50 border-b border-border cursor-pointer\"\n        onClick={() => setIsExpanded(!isExpanded)}\n      >\n        <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n          <button\n            type=\"button\"\n            className=\"text-[10px] text-muted-foreground hover:text-foreground transition-transform\"\n            style={{ transform: isExpanded ? 'rotate(90deg)' : 'rotate(0deg)' }}\n          >\n            ▶\n          </button>\n          <select\n            value={language}\n            onClick={(e) => e.stopPropagation()}\n            onChange={(e) => {\n              setLanguage(e.target.value);\n              onUpdate({ language: e.target.value, code });\n            }}\n            className=\"text-[9px] uppercase tracking-wider bg-transparent text-muted-foreground outline-none cursor-pointer\"\n          >\n            {CODE_LANGUAGES.map((lang) => (\n              <option key={lang.value} value={lang.value}>\n                {lang.label}\n              </option>\n            ))}\n          </select>\n          {!isExpanded && hasContent && (\n            <span className=\"text-[9px] text-muted-foreground/70 truncate flex-1\">\n              {firstLine.slice(0, 40)}{firstLine.length > 40 ? '...' : ''} \n              <span className=\"ml-1 opacity-60\">({lineCount} line{lineCount !== 1 ? 's' : ''})</span>\n            </span>\n          )}\n        </div>\n        <button\n          type=\"button\"\n          onClick={(e) => {\n            e.stopPropagation();\n            onDelete();\n          }}\n          className=\"text-[9px] text-muted-foreground opacity-0 group-hover:opacity-100 hover:text-destructive transition-opacity ml-2\"\n        >\n          Remove\n        </button>\n      </div>\n      \n      {/* Expandable code area */}\n      {isExpanded && (\n        <textarea\n          ref={textareaRef}\n          value={code}\n          onChange={(e) => setCode(e.target.value)}\n          onBlur={handleBlur}\n          placeholder=\"// Write your code here...\"\n          className=\"w-full px-3 py-2 text-xs font-mono leading-relaxed bg-muted/30 text-foreground placeholder:text-muted-foreground/50 outline-none resize-none min-h-[120px]\"\n          spellCheck={false}\n          autoFocus\n        />\n      )}\n      \n      {/* Collapsed preview */}\n      {!isExpanded && hasContent && (\n        <div className=\"px-3 py-2 bg-muted/30 max-h-[60px] overflow-hidden\">\n          <pre className=\"text-[10px] font-mono text-muted-foreground leading-tight whitespace-pre-wrap\">\n            {code.split('\\n').slice(0, 3).join('\\n')}\n            {lineCount > 3 && '\\n...'}\n          </pre>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Link Block Editor\nfunction LinkBlockEditor({\n  data,\n  onUpdate,\n  onDelete,\n}: {\n  data: LinkData;\n  onUpdate: (data: LinkData) => void;\n  onDelete: () => void;\n}) {\n  const [url, setUrl] = useState(data.url);\n  const [title, setTitle] = useState(data.title || \"\");\n  const [description, setDescription] = useState(data.description || \"\");\n\n  useEffect(() => {\n    setUrl(data.url);\n    setTitle(data.title || \"\");\n    setDescription(data.description || \"\");\n  }, [data]);\n\n  const handleBlur = () => {\n    onUpdate({ url, title, description });\n  };\n\n  const isValidUrl = url.startsWith(\"http://\") || url.startsWith(\"https://\");\n\n  return (\n    <div className=\"relative border border-border rounded-sm overflow-hidden hover:border-foreground/30 transition-colors\">\n      <div className=\"p-2 space-y-1.5\">\n        <input\n          type=\"url\"\n          value={url}\n          onChange={(e) => setUrl(e.target.value)}\n          onBlur={handleBlur}\n          placeholder=\"https://example.com\"\n          className=\"w-full text-xs text-muted-foreground bg-transparent outline-none placeholder:text-muted-foreground/50\"\n        />\n        <input\n          type=\"text\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n          onBlur={handleBlur}\n          placeholder=\"Link title (optional)\"\n          className=\"w-full text-sm font-medium bg-transparent text-foreground outline-none placeholder:text-muted-foreground/50\"\n        />\n        <input\n          type=\"text\"\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n          onBlur={handleBlur}\n          placeholder=\"Description (optional)\"\n          className=\"w-full text-xs bg-transparent text-muted-foreground outline-none placeholder:text-muted-foreground/50\"\n        />\n      </div>\n      {isValidUrl && (\n        <a\n          href={url}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"block px-2 py-1.5 text-[9px] uppercase tracking-wider text-muted-foreground hover:text-foreground bg-muted/30 border-t border-border\"\n        >\n          Open Link →\n        </a>\n      )}\n      <button\n        type=\"button\"\n        onClick={onDelete}\n        className=\"absolute top-2 right-2 text-[9px] text-muted-foreground opacity-0 group-hover:opacity-100 hover:text-destructive transition-opacity\"\n      >\n        Remove\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3794, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/day-view.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\"\n\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  type DayData,\n  type TimeBlock,\n  type ContentBlock,\n  MONTH_NAMES,\n  WEEKDAYS,\n  BLOCK_CATEGORIES,\n  type TimeBlockCategory,\n  DAY_COLORS,\n  type DayColorCode,\n} from \"./calendar-types\";\nimport { TimeBlockEditor } from \"./time-block-editor\";\nimport { ContentEditor } from \"./content-editor\";\n\ninterface DayViewProps {\n  date: Date;\n  data: DayData;\n  onUpdate: (data: DayData) => void;\n}\n\ntype MobileTab = \"schedule\" | \"notes\";\n\nconst PANEL_WIDTH_KEY = \"kair-schedule-panel-width\";\nconst DEFAULT_PANEL_WIDTH = 340;\nconst MIN_PANEL_WIDTH = 200;\nconst MAX_PANEL_WIDTH = 600;\n\n// Calculate duration in minutes\nfunction getDuration(start: string, end: string): number {\n  const [startH, startM] = start.split(\":\").map(Number);\n  const [endH, endM] = end.split(\":\").map(Number);\n  return endH * 60 + endM - (startH * 60 + startM);\n}\n\n// Format hours nicely\nfunction formatHours(minutes: number): string {\n  if (minutes < 60) return `${minutes}m`;\n  const h = Math.floor(minutes / 60);\n  const m = minutes % 60;\n  return m > 0 ? `${h}h ${m}m` : `${h}h`;\n}\n\nexport function DayView({ date, data, onUpdate }: DayViewProps) {\n  const [mobileTab, setMobileTab] = useState<MobileTab>(\"schedule\");\n  const [panelWidth, setPanelWidth] = useState(DEFAULT_PANEL_WIDTH);\n  const [isResizing, setIsResizing] = useState(false);\n  const [isDesktop, setIsDesktop] = useState(false);\n  const [showDayColorPicker, setShowDayColorPicker] = useState(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const dayColorPickerRef = useRef<HTMLDivElement>(null);\n  \n  // Check if desktop and load saved panel width on mount\n  useEffect(() => {\n    const checkDesktop = () => setIsDesktop(window.innerWidth >= 768);\n    checkDesktop();\n    window.addEventListener(\"resize\", checkDesktop);\n    \n    const saved = localStorage.getItem(PANEL_WIDTH_KEY);\n    if (saved) {\n      const width = parseInt(saved, 10);\n      if (width >= MIN_PANEL_WIDTH && width <= MAX_PANEL_WIDTH) {\n        setPanelWidth(width);\n      }\n    }\n    \n    return () => window.removeEventListener(\"resize\", checkDesktop);\n  }, []);\n  \n  // Save panel width when it changes\n  useEffect(() => {\n    if (!isResizing) {\n      localStorage.setItem(PANEL_WIDTH_KEY, panelWidth.toString());\n    }\n  }, [panelWidth, isResizing]);\n  \n  // Close day color picker when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (dayColorPickerRef.current && !dayColorPickerRef.current.contains(e.target as Node)) {\n        setShowDayColorPicker(false);\n      }\n    };\n    if (showDayColorPicker) {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n      return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n    }\n  }, [showDayColorPicker]);\n  \n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\n    e.preventDefault();\n    setIsResizing(true);\n  }, []);\n  \n  useEffect(() => {\n    if (!isResizing) return;\n    \n    // Lock cursor during resize\n    document.body.style.cursor = \"col-resize\";\n    document.body.style.userSelect = \"none\";\n    \n    const handleMouseMove = (e: MouseEvent) => {\n      if (!containerRef.current) return;\n      const containerRect = containerRef.current.getBoundingClientRect();\n      const newWidth = e.clientX - containerRect.left;\n      const clampedWidth = Math.min(Math.max(newWidth, MIN_PANEL_WIDTH), MAX_PANEL_WIDTH);\n      setPanelWidth(clampedWidth);\n    };\n    \n    const handleMouseUp = () => {\n      setIsResizing(false);\n      document.body.style.cursor = \"\";\n      document.body.style.userSelect = \"\";\n    };\n    \n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n    \n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n      document.body.style.cursor = \"\";\n      document.body.style.userSelect = \"\";\n    };\n  }, [isResizing]);\n  \n  const today = new Date();\n  const isToday =\n    date.getDate() === today.getDate() &&\n    date.getMonth() === today.getMonth() &&\n    date.getFullYear() === today.getFullYear();\n\n  const handleTimeBlocksUpdate = (timeBlocks: TimeBlock[]) => {\n    onUpdate({ ...data, timeBlocks });\n  };\n\n  const handleContentBlocksUpdate = (contentBlocks: ContentBlock[]) => {\n    onUpdate({ ...data, contentBlocks });\n  };\n  \n  const handleDayColorChange = (color: DayColorCode) => {\n    onUpdate({ ...data, dayColor: color });\n    setShowDayColorPicker(false);\n  };\n\n  // Get current day color info\n  const currentDayColor = data.dayColor ? DAY_COLORS[data.dayColor] : null;\n\n  // Calculate time stats by category\n  const timeBlocks = data.timeBlocks || [];\n  const categoryMinutes: Partial<Record<TimeBlockCategory, number>> = {};\n  let totalMinutes = 0;\n  \n  timeBlocks.forEach((block) => {\n    const dur = getDuration(block.startTime, block.endTime);\n    totalMinutes += dur;\n    categoryMinutes[block.category] = (categoryMinutes[block.category] || 0) + dur;\n  });\n\n  // Get categories that have time\n  const activeCategories = Object.entries(categoryMinutes).filter(([, mins]) => mins && mins > 0);\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      {/* Compact Date Header */}\n      <div className=\"border-b border-border px-4 md:px-6 py-3 md:py-4\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n          {/* Date info */}\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex items-baseline gap-2 sm:gap-3\">\n              <span\n                className={cn(\n                  \"text-4xl sm:text-5xl font-light tracking-tight tabular-nums\",\n                  isToday ? \"text-foreground\" : \"text-foreground/80\"\n                )}\n              >\n                {date.getDate()}\n              </span>\n              <div className=\"flex flex-col\">\n                <span className=\"text-sm sm:text-base tracking-wide text-foreground\">\n                  {WEEKDAYS[date.getDay()]}\n                </span>\n                <span className=\"text-[10px] sm:text-xs text-muted-foreground\">\n                  {MONTH_NAMES[date.getMonth()]} {date.getFullYear()}\n                </span>\n              </div>\n            </div>\n            {isToday && (\n              <span className=\"text-[8px] sm:text-[9px] uppercase tracking-widest text-muted-foreground/70 border border-border px-1.5 sm:px-2 py-0.5\">\n                Today\n              </span>\n            )}\n            \n            {/* Day Color Picker */}\n            <div className=\"relative\" ref={dayColorPickerRef}>\n              <button\n                type=\"button\"\n                onClick={() => setShowDayColorPicker(!showDayColorPicker)}\n                className={cn(\n                  \"flex items-center gap-1.5 px-2 py-1 rounded-sm border text-[9px] sm:text-[10px] transition-colors\",\n                  currentDayColor \n                    ? `${currentDayColor.bgClass} ${currentDayColor.borderClass}` \n                    : \"border-border hover:border-muted-foreground/50\"\n                )}\n                title=\"Set day color\"\n              >\n                <div className={cn(\n                  \"w-2.5 h-2.5 rounded-full\",\n                  currentDayColor ? currentDayColor.bgClassSolid : \"bg-muted-foreground/30\"\n                )} />\n                <span className=\"hidden sm:inline text-muted-foreground\">\n                  {currentDayColor ? currentDayColor.label : \"Color\"}\n                </span>\n              </button>\n              \n              {showDayColorPicker && (\n                <div className=\"absolute top-full left-0 mt-1 z-50 bg-popover border border-border rounded-md shadow-lg p-2 min-w-[180px]\">\n                  <div className=\"text-[9px] uppercase tracking-wider text-muted-foreground mb-2 px-1\">\n                    Day Color\n                  </div>\n                  <div className=\"space-y-1\">\n                    {(Object.entries(DAY_COLORS) as [Exclude<DayColorCode, null>, typeof DAY_COLORS[Exclude<DayColorCode, null>]][]).map(\n                      ([code, info]) => (\n                        <button\n                          key={code}\n                          type=\"button\"\n                          onClick={() => handleDayColorChange(code)}\n                          className={cn(\n                            \"w-full flex items-center gap-2 px-2 py-1.5 rounded-sm text-left transition-colors\",\n                            \"hover:bg-accent\",\n                            data.dayColor === code && \"bg-accent\"\n                          )}\n                        >\n                          <div className={cn(\"w-3 h-3 rounded-full flex-shrink-0\", info.bgClassSolid)} />\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"text-[10px] font-medium\">{info.label}</div>\n                            <div className=\"text-[8px] text-muted-foreground truncate\">{info.description}</div>\n                          </div>\n                        </button>\n                      )\n                    )}\n                    {data.dayColor && (\n                      <>\n                        <div className=\"border-t border-border my-1\" />\n                        <button\n                          type=\"button\"\n                          onClick={() => handleDayColorChange(null)}\n                          className=\"w-full flex items-center gap-2 px-2 py-1.5 rounded-sm text-left hover:bg-accent transition-colors\"\n                        >\n                          <div className=\"w-3 h-3 rounded-full flex-shrink-0 border border-muted-foreground/30\" />\n                          <span className=\"text-[10px] text-muted-foreground\">Clear color</span>\n                        </button>\n                      </>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Day Stats Summary */}\n          {totalMinutes > 0 && (\n            <div className=\"flex items-center gap-2 sm:gap-4 overflow-x-auto pb-1 -mb-1\">\n              <div className=\"text-right flex-shrink-0\">\n                <span className=\"text-lg sm:text-2xl font-light text-foreground tabular-nums\">\n                  {formatHours(totalMinutes)}\n                </span>\n                <span className=\"text-[9px] sm:text-[10px] uppercase tracking-wider text-muted-foreground ml-1 sm:ml-2\">\n                  planned\n                </span>\n              </div>\n              <div className=\"flex items-center gap-1.5 sm:gap-2 flex-shrink-0\">\n                {activeCategories.map(([cat, mins]) => {\n                  const catInfo = BLOCK_CATEGORIES[cat as TimeBlockCategory];\n                  if (!catInfo) {\n                    return (\n                      <div\n                        key={cat}\n                        className=\"flex items-center gap-1 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-sm border bg-muted/50 border-muted-foreground/50\"\n                        title={`${formatHours(mins!)} ${cat}`}\n                      >\n                        <span className=\"text-[9px] sm:text-[10px] font-medium capitalize\">{cat}</span>\n                        <span className=\"text-[9px] sm:text-[10px] text-muted-foreground\">\n                          {formatHours(mins!)}\n                        </span>\n                      </div>\n                    );\n                  }\n                  return (\n                    <div\n                      key={cat}\n                      className={cn(\n                        \"flex items-center gap-1 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-sm border\",\n                        catInfo.bgClass,\n                        catInfo.borderClass\n                      )}\n                      title={`${formatHours(mins!)} ${catInfo.label}`}\n                    >\n                      <span className=\"text-[9px] sm:text-[10px] font-medium\">{catInfo.label}</span>\n                      <span className=\"text-[9px] sm:text-[10px] text-muted-foreground\">\n                        {formatHours(mins!)}\n                      </span>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Mobile Tab Switcher */}\n      <div className=\"md:hidden border-b border-border flex\">\n        <button\n          type=\"button\"\n          onClick={() => setMobileTab(\"schedule\")}\n          className={cn(\n            \"flex-1 py-2 text-[10px] uppercase tracking-widest transition-colors\",\n            mobileTab === \"schedule\" \n              ? \"text-foreground bg-accent/50\" \n              : \"text-muted-foreground\"\n          )}\n        >\n          Schedule ({timeBlocks.length})\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => setMobileTab(\"notes\")}\n          className={cn(\n            \"flex-1 py-2 text-[10px] uppercase tracking-widest transition-colors border-l border-border\",\n            mobileTab === \"notes\" \n              ? \"text-foreground bg-accent/50\" \n              : \"text-muted-foreground\"\n          )}\n        >\n          Notes ({(data.contentBlocks || []).length})\n        </button>\n      </div>\n\n      {/* Main Content Area - Two Column on Desktop, Tabbed on Mobile */}\n      <div ref={containerRef} className=\"flex-1 flex overflow-hidden\">\n        {/* Left Panel - Time Blocks */}\n        <div \n          className={cn(\n            \"flex-col\",\n            \"md:flex md:flex-shrink-0\",\n            mobileTab === \"schedule\" ? \"flex flex-1 md:flex-none\" : \"hidden\"\n          )}\n          style={isDesktop ? { width: panelWidth } : undefined}\n        >\n          <div className=\"hidden md:flex px-5 py-3 border-b border-border items-center justify-between\">\n            <span className=\"text-[10px] uppercase tracking-widest text-muted-foreground\">\n              Schedule\n            </span>\n            {timeBlocks.length > 0 && (\n              <span className=\"text-[10px] text-muted-foreground\">\n                {timeBlocks.length} block{timeBlocks.length !== 1 ? \"s\" : \"\"}\n              </span>\n            )}\n          </div>\n\n          <div className=\"flex-1 overflow-y-auto\">\n            <div className=\"p-3 md:p-4\">\n              <TimeBlockEditor\n                blocks={data.timeBlocks || []}\n                onUpdate={handleTimeBlocksUpdate}\n              />\n            </div>\n          </div>\n\n          {/* Category Legend */}\n          <div className=\"border-t border-border px-3 md:px-5 py-2 md:py-3\">\n            <div className=\"flex flex-wrap gap-1.5 md:gap-2\">\n              {(Object.entries(BLOCK_CATEGORIES) as [TimeBlockCategory, typeof BLOCK_CATEGORIES[TimeBlockCategory]][]).map(\n                ([cat, info]) => (\n                  <div\n                    key={cat}\n                    className=\"flex items-center gap-1 md:gap-1.5 text-[8px] md:text-[9px] text-muted-foreground\"\n                  >\n                    <div\n                      className={cn(\n                        \"w-1.5 h-1.5 md:w-2 md:h-2 rounded-sm border\",\n                        info.bgClass,\n                        info.borderClass\n                      )}\n                    />\n                    <span>{info.label}</span>\n                  </div>\n                )\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Resize Handle - Desktop only */}\n        <div\n          onMouseDown={handleMouseDown}\n          className={cn(\n            \"hidden md:flex w-[3px] flex-shrink-0 cursor-col-resize items-center justify-center\",\n            \"border-l border-border hover:border-muted-foreground/50 transition-colors group\",\n            isResizing && \"border-muted-foreground/50 bg-accent/50\"\n          )}\n        >\n          <div className={cn(\n            \"w-px h-12 bg-transparent group-hover:bg-muted-foreground/40 transition-colors\",\n            isResizing && \"bg-muted-foreground/40\"\n          )} />\n        </div>\n\n        {/* Right Panel - Notes & Content */}\n        <div className={cn(\n          \"flex-col overflow-hidden\",\n          \"md:flex md:flex-1\",\n          mobileTab === \"notes\" ? \"flex flex-1\" : \"hidden\"\n        )}>\n          <div className=\"hidden md:flex px-6 py-3 border-b border-border items-center justify-between\">\n            <span className=\"text-[10px] uppercase tracking-widest text-muted-foreground\">\n              Notes & Tasks\n            </span>\n            {(data.contentBlocks || []).length > 0 && (\n              <span className=\"text-[10px] text-muted-foreground\">\n                {data.contentBlocks?.length} block\n                {(data.contentBlocks?.length || 0) !== 1 ? \"s\" : \"\"}\n              </span>\n            )}\n          </div>\n\n          <div className=\"flex-1 overflow-y-auto\">\n            <div className=\"p-4 md:p-6 min-h-full\">\n              <ContentEditor\n                blocks={data.contentBlocks || []}\n                onUpdate={handleContentBlocksUpdate}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4528, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/view-switcher.tsx"],"sourcesContent":["\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport type { ViewMode } from \"./calendar-types\";\n\ninterface ViewSwitcherProps {\n  view: ViewMode;\n  onViewChange: (view: ViewMode) => void;\n}\n\nconst VIEWS: { mode: ViewMode; label: string }[] = [\n  { mode: \"year\", label: \"Y\" },\n  { mode: \"month\", label: \"M\" },\n  { mode: \"week\", label: \"W\" },\n  { mode: \"day\", label: \"D\" },\n];\n\nexport function ViewSwitcher({ view, onViewChange }: ViewSwitcherProps) {\n  return (\n    <div className=\"flex items-center border border-border\">\n      {VIEWS.map(({ mode, label }) => (\n        <button\n          key={mode}\n          type=\"button\"\n          onClick={() => onViewChange(mode)}\n          className={cn(\n            \"w-6 h-5 text-[9px] font-medium tracking-wider transition-colors\",\n            \"border-r border-border last:border-r-0\",\n            view === mode\n              ? \"bg-foreground text-background\"\n              : \"text-muted-foreground hover:text-foreground hover:bg-accent/50\"\n          )}\n        >\n          {label}\n        </button>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUA,MAAM,QAA6C;IACjD;QAAE,MAAM;QAAQ,OAAO;IAAI;IAC3B;QAAE,MAAM;QAAS,OAAO;IAAI;IAC5B;QAAE,MAAM;QAAQ,OAAO;IAAI;IAC3B;QAAE,MAAM;QAAO,OAAO;IAAI;CAC3B;AAEM,SAAS,aAAa,EAAE,IAAI,EAAE,YAAY,EAAqB;IACpE,qBACE,6TAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,iBACzB,6TAAC;gBAEC,MAAK;gBACL,SAAS,IAAM,aAAa;gBAC5B,WAAW,IAAA,qHAAE,EACX,mEACA,0CACA,SAAS,OACL,kCACA;0BAGL;eAXI;;;;;;;;;;AAgBf;KArBgB"}},
    {"offset": {"line": 4584, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/theme-toggle.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ntype Theme = \"light\" | \"dark\";\n\nexport function ThemeToggle() {\n  const [theme, setTheme] = useState<Theme>(\"light\");\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n    // Check localStorage first, then system preference\n    const stored = localStorage.getItem(\"kair-theme\") as Theme | null;\n    if (stored) {\n      setTheme(stored);\n      document.documentElement.classList.toggle(\"dark\", stored === \"dark\");\n    } else {\n      const prefersDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n      setTheme(prefersDark ? \"dark\" : \"light\");\n      document.documentElement.classList.toggle(\"dark\", prefersDark);\n    }\n  }, []);\n\n  const toggleTheme = () => {\n    const newTheme = theme === \"light\" ? \"dark\" : \"light\";\n    setTheme(newTheme);\n    localStorage.setItem(\"kair-theme\", newTheme);\n    document.documentElement.classList.toggle(\"dark\", newTheme === \"dark\");\n  };\n\n  if (!mounted) {\n    return (\n      <div className=\"w-8 h-4 rounded-full bg-muted border border-border\" />\n    );\n  }\n\n  return (\n    <button\n      type=\"button\"\n      onClick={toggleTheme}\n      className={cn(\n        \"relative w-8 h-4 rounded-full transition-colors duration-200\",\n        \"border border-border\",\n        theme === \"dark\" ? \"bg-foreground/20\" : \"bg-muted\"\n      )}\n      title={`Switch to ${theme === \"light\" ? \"dark\" : \"light\"} mode`}\n    >\n      <span\n        className={cn(\n          \"absolute top-0.5 w-2.5 h-2.5 rounded-full transition-all duration-200\",\n          \"flex items-center justify-center text-[6px]\",\n          theme === \"dark\" \n            ? \"left-[calc(100%-12px)] bg-foreground\" \n            : \"left-0.5 bg-foreground/70\"\n        )}\n      />\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAOO,SAAS;;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,ySAAQ,EAAQ;IAC1C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,ySAAQ,EAAC;IAEvC,IAAA,0SAAS;iCAAC;YACR,WAAW;YACX,mDAAmD;YACnD,MAAM,SAAS,aAAa,OAAO,CAAC;YACpC,IAAI,QAAQ;gBACV,SAAS;gBACT,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,WAAW;YAC/D,OAAO;gBACL,MAAM,cAAc,OAAO,UAAU,CAAC,gCAAgC,OAAO;gBAC7E,SAAS,cAAc,SAAS;gBAChC,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ;YACpD;QACF;gCAAG,EAAE;IAEL,MAAM,cAAc;QAClB,MAAM,WAAW,UAAU,UAAU,SAAS;QAC9C,SAAS;QACT,aAAa,OAAO,CAAC,cAAc;QACnC,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,aAAa;IACjE;IAEA,IAAI,CAAC,SAAS;QACZ,qBACE,6TAAC;YAAI,WAAU;;;;;;IAEnB;IAEA,qBACE,6TAAC;QACC,MAAK;QACL,SAAS;QACT,WAAW,IAAA,qHAAE,EACX,gEACA,wBACA,UAAU,SAAS,qBAAqB;QAE1C,OAAO,CAAC,UAAU,EAAE,UAAU,UAAU,SAAS,QAAQ,KAAK,CAAC;kBAE/D,cAAA,6TAAC;YACC,WAAW,IAAA,qHAAE,EACX,yEACA,+CACA,UAAU,SACN,yCACA;;;;;;;;;;;AAKd;GArDgB;KAAA"}},
    {"offset": {"line": 4659, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/omni-bar.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\"\n\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { type DotColor, MONTH_NAMES } from \"./calendar-types\";\n\ninterface OmniBarProps {\n  onAction?: (action: CalendarAction) => void;\n}\n\nexport interface CalendarAction {\n  type: \"add_note\" | \"add_dot\" | \"navigate\" | \"set_view\";\n  payload: {\n    date?: Date;\n    note?: string;\n    dotColor?: DotColor;\n    view?: \"year\" | \"month\" | \"week\" | \"day\";\n  };\n}\n\ninterface Suggestion {\n  id: string;\n  icon: string;\n  label: string;\n  description: string;\n  action: () => void;\n}\n\ninterface Message {\n  id: string;\n  role: \"user\" | \"assistant\";\n  content: string;\n  timestamp: Date;\n}\n\nexport function OmniBar({ onAction }: OmniBarProps) {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [input, setInput] = useState(\"\");\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [isThinking, setIsThinking] = useState(false);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // Focus input when expanded\n  useEffect(() => {\n    if (isExpanded && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isExpanded]);\n\n  // Scroll to bottom when messages change\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  // Keyboard shortcut to open\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === \"k\") {\n        e.preventDefault();\n        setIsExpanded(true);\n      }\n      if (e.key === \"Escape\" && isExpanded) {\n        setIsExpanded(false);\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [isExpanded]);\n\n  const suggestions: Suggestion[] = [\n    {\n      id: \"today\",\n      icon: \"~\",\n      label: \"Go to today\",\n      description: \"Jump to current date\",\n      action: () => {\n        onAction?.({\n          type: \"navigate\",\n          payload: { date: new Date() },\n        });\n        addAssistantMessage(\"Navigated to today.\");\n      },\n    },\n    {\n      id: \"week\",\n      icon: \"W\",\n      label: \"Week view\",\n      description: \"Switch to week view\",\n      action: () => {\n        onAction?.({\n          type: \"set_view\",\n          payload: { view: \"week\" },\n        });\n        addAssistantMessage(\"Switched to week view.\");\n      },\n    },\n    {\n      id: \"month\",\n      icon: \"M\",\n      label: \"Month view\",\n      description: \"Switch to month view\",\n      action: () => {\n        onAction?.({\n          type: \"set_view\",\n          payload: { view: \"month\" },\n        });\n        addAssistantMessage(\"Switched to month view.\");\n      },\n    },\n    {\n      id: \"year\",\n      icon: \"Y\",\n      label: \"Year view\",\n      description: \"See annual overview\",\n      action: () => {\n        onAction?.({\n          type: \"set_view\",\n          payload: { view: \"year\" },\n        });\n        addAssistantMessage(\"Switched to year view.\");\n      },\n    },\n  ];\n\n  const addAssistantMessage = (content: string) => {\n    setMessages((prev) => [\n      ...prev,\n      {\n        id: `msg-${Date.now()}`,\n        role: \"assistant\",\n        content,\n        timestamp: new Date(),\n      },\n    ]);\n  };\n\n  const parseNaturalLanguage = useCallback((text: string): string => {\n    const lower = text.toLowerCase().trim();\n    \n    // View switching\n    if (lower.includes(\"year view\") || lower === \"year\" || lower === \"y\") {\n      onAction?.({ type: \"set_view\", payload: { view: \"year\" } });\n      return \"Switched to year view.\";\n    }\n    if (lower.includes(\"month view\") || lower === \"month\" || lower === \"m\") {\n      onAction?.({ type: \"set_view\", payload: { view: \"month\" } });\n      return \"Switched to month view.\";\n    }\n    if (lower.includes(\"week view\") || lower === \"week\" || lower === \"w\") {\n      onAction?.({ type: \"set_view\", payload: { view: \"week\" } });\n      return \"Switched to week view.\";\n    }\n    if (lower.includes(\"day view\") || lower === \"day\" || lower === \"d\") {\n      onAction?.({ type: \"set_view\", payload: { view: \"day\" } });\n      return \"Switched to day view.\";\n    }\n    \n    // Navigation\n    if (lower === \"today\" || lower === \"now\" || lower === \"go to today\") {\n      onAction?.({ type: \"navigate\", payload: { date: new Date() } });\n      return \"Navigated to today.\";\n    }\n    if (lower === \"tomorrow\") {\n      const tomorrow = new Date();\n      tomorrow.setDate(tomorrow.getDate() + 1);\n      onAction?.({ type: \"navigate\", payload: { date: tomorrow } });\n      return `Navigated to tomorrow (${MONTH_NAMES[tomorrow.getMonth()]} ${tomorrow.getDate()}).`;\n    }\n    if (lower === \"yesterday\") {\n      const yesterday = new Date();\n      yesterday.setDate(yesterday.getDate() - 1);\n      onAction?.({ type: \"navigate\", payload: { date: yesterday } });\n      return `Navigated to yesterday (${MONTH_NAMES[yesterday.getMonth()]} ${yesterday.getDate()}).`;\n    }\n    \n    // Next/previous week\n    if (lower === \"next week\") {\n      const nextWeek = new Date();\n      nextWeek.setDate(nextWeek.getDate() + 7);\n      onAction?.({ type: \"navigate\", payload: { date: nextWeek } });\n      onAction?.({ type: \"set_view\", payload: { view: \"week\" } });\n      return \"Navigated to next week.\";\n    }\n    if (lower === \"last week\" || lower === \"previous week\") {\n      const lastWeek = new Date();\n      lastWeek.setDate(lastWeek.getDate() - 7);\n      onAction?.({ type: \"navigate\", payload: { date: lastWeek } });\n      onAction?.({ type: \"set_view\", payload: { view: \"week\" } });\n      return \"Navigated to last week.\";\n    }\n    \n    // Month navigation\n    const monthMatch = lower.match(/^(january|february|march|april|may|june|july|august|september|october|november|december)$/);\n    if (monthMatch) {\n      const monthIndex = MONTH_NAMES.findIndex(\n        (m) => m.toLowerCase() === monthMatch[1]\n      );\n      if (monthIndex !== -1) {\n        const date = new Date();\n        date.setMonth(monthIndex);\n        date.setDate(1);\n        onAction?.({ type: \"navigate\", payload: { date } });\n        onAction?.({ type: \"set_view\", payload: { view: \"month\" } });\n        return `Navigated to ${MONTH_NAMES[monthIndex]}.`;\n      }\n    }\n    \n    // Add note pattern: \"add note: ...\" or \"note: ...\"\n    const noteMatch = lower.match(/^(?:add\\s+)?note[:\\s]+(.+)$/);\n    if (noteMatch) {\n      onAction?.({\n        type: \"add_note\",\n        payload: { date: new Date(), note: noteMatch[1] },\n      });\n      return `Added note to today: \"${noteMatch[1]}\"`;\n    }\n    \n    // Add dot pattern - maps to new 7-color palette\n    const dotMatch = lower.match(/^(?:add\\s+)?(?:dot|marker|mark)\\s*(periwinkle|lavender|cream|yellow|sage|green|brown|maroon|magenta|pink|terracotta|orange|gray|grey)?$/);\n    if (dotMatch) {\n      const colorMap: Record<string, DotColor> = {\n        periwinkle: 1,\n        lavender: 1,\n        cream: 2,\n        yellow: 2,\n        sage: 3,\n        green: 3,\n        brown: 4,\n        maroon: 4,\n        magenta: 5,\n        pink: 5,\n        terracotta: 6,\n        orange: 6,\n        gray: 7,\n        grey: 7,\n      };\n      const color = dotMatch[1] ? colorMap[dotMatch[1]] : 1;\n      onAction?.({\n        type: \"add_dot\",\n        payload: { date: new Date(), dotColor: color },\n      });\n      return `Added ${dotMatch[1] || \"periwinkle\"} marker to today.`;\n    }\n    \n    // Help\n    if (lower === \"help\" || lower === \"?\") {\n      return \"Try: 'today', 'tomorrow', 'next week', 'January', 'year view', 'note: meeting at 3pm', 'add dot red'\";\n    }\n    \n    return \"I didn't understand that. Type 'help' for examples.\";\n  }, [onAction]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!input.trim()) return;\n\n    // Add user message\n    const userMessage: Message = {\n      id: `msg-${Date.now()}`,\n      role: \"user\",\n      content: input,\n      timestamp: new Date(),\n    };\n    setMessages((prev) => [...prev, userMessage]);\n    setInput(\"\");\n\n    // Simulate thinking\n    setIsThinking(true);\n    setTimeout(() => {\n      const response = parseNaturalLanguage(input);\n      addAssistantMessage(response);\n      setIsThinking(false);\n    }, 300);\n  };\n\n  const handleSuggestionClick = (suggestion: Suggestion) => {\n    suggestion.action();\n  };\n\n  return (\n    <>\n      {/* Backdrop */}\n      {isExpanded && (\n        <div\n          className=\"fixed inset-0 bg-foreground/5 backdrop-blur-[2px] z-40\"\n          onClick={() => setIsExpanded(false)}\n        />\n      )}\n\n      {/* Omni Bar */}\n      <div\n        className={cn(\n          \"fixed z-50 transition-all duration-300 ease-out\",\n          isExpanded\n            ? \"bottom-0 sm:bottom-8 left-0 sm:left-1/2 sm:-translate-x-1/2 w-full sm:max-w-lg\"\n            : \"bottom-4 left-1/2 -translate-x-1/2\"\n        )}\n      >\n        {/* Collapsed state - floating pill */}\n        {!isExpanded && (\n          <button\n            type=\"button\"\n            onClick={() => setIsExpanded(true)}\n            className={cn(\n              \"flex items-center gap-2 px-4 py-2\",\n              \"bg-card border border-border\",\n              \"hover:bg-accent/50 transition-colors\",\n              \"text-muted-foreground hover:text-foreground\",\n              \"shadow-sm\"\n            )}\n          >\n            <span className=\"text-[10px] tracking-wider\">CMD+K</span>\n            <span className=\"text-[10px] text-muted-foreground/60\">|</span>\n            <span className=\"text-[10px]\">Ask anything...</span>\n          </button>\n        )}\n\n        {/* Expanded state */}\n        {isExpanded && (\n          <div className=\"bg-card border border-border shadow-lg flex flex-col overflow-hidden\">\n            {/* Messages area */}\n            {messages.length > 0 && (\n              <div className=\"max-h-64 overflow-y-auto border-b border-border\">\n                <div className=\"p-3 space-y-3\">\n                  {messages.map((msg) => (\n                    <div\n                      key={msg.id}\n                      className={cn(\n                        \"text-[11px] leading-relaxed\",\n                        msg.role === \"user\"\n                          ? \"text-foreground\"\n                          : \"text-muted-foreground\"\n                      )}\n                    >\n                      <span className=\"text-[9px] uppercase tracking-wider text-muted-foreground/60 mr-2\">\n                        {msg.role === \"user\" ? \"you\" : \"field\"}\n                      </span>\n                      {msg.content}\n                    </div>\n                  ))}\n                  {isThinking && (\n                    <div className=\"text-[11px] text-muted-foreground\">\n                      <span className=\"text-[9px] uppercase tracking-wider text-muted-foreground/60 mr-2\">\n                        field\n                      </span>\n                      <span className=\"animate-pulse\">...</span>\n                    </div>\n                  )}\n                  <div ref={messagesEndRef} />\n                </div>\n              </div>\n            )}\n\n            {/* Input */}\n            <form onSubmit={handleSubmit} className=\"p-3 sm:p-3\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-muted-foreground/60 text-[10px]\">&gt;</span>\n                <input\n                  ref={inputRef}\n                  type=\"text\"\n                  value={input}\n                  onChange={(e) => setInput(e.target.value)}\n                  placeholder=\"Type a command or ask something...\"\n                  className={cn(\n                    \"flex-1 bg-transparent text-sm sm:text-[11px] text-foreground\",\n                    \"placeholder:text-muted-foreground/50\",\n                    \"outline-none py-1\"\n                  )}\n                />\n                <span className=\"text-[9px] text-muted-foreground/40 hidden sm:block\">ESC</span>\n              </div>\n            </form>\n\n            {/* Suggestions */}\n            {messages.length === 0 && (\n              <div className=\"p-3 pt-0 border-t border-border\">\n                <div className=\"text-[9px] uppercase tracking-wider text-muted-foreground/50 mb-2\">\n                  Quick actions\n                </div>\n                <div className=\"grid grid-cols-2 gap-1\">\n                  {suggestions.map((suggestion) => (\n                    <button\n                      key={suggestion.id}\n                      type=\"button\"\n                      onClick={() => handleSuggestionClick(suggestion)}\n                      className={cn(\n                        \"flex items-center gap-2 p-2 text-left\",\n                        \"hover:bg-accent/30 transition-colors\",\n                        \"border border-transparent hover:border-border\"\n                      )}\n                    >\n                      <span className=\"w-5 h-5 flex items-center justify-center bg-muted text-[10px] text-muted-foreground\">\n                        {suggestion.icon}\n                      </span>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"text-[10px] text-foreground truncate\">\n                          {suggestion.label}\n                        </div>\n                        <div className=\"text-[9px] text-muted-foreground/60 truncate\">\n                          {suggestion.description}\n                        </div>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Footer hint */}\n            <div className=\"px-3 py-2 border-t border-border bg-muted/30\">\n              <div className=\"text-[9px] text-muted-foreground/50 text-center\">\n                Try: \"today\" \"next week\" \"January\" \"note: dentist at 2pm\" \"help\"\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5275, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrannen/Documents/kair-cal/components/year-calendar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport { MonthGrid } from \"./month-grid\";\nimport { MonthView } from \"./month-view\";\nimport { WeekView } from \"./week-view\";\nimport { DayView } from \"./day-view\";\nimport { ViewSwitcher } from \"./view-switcher\";\nimport { ThemeToggle } from \"./theme-toggle\";\nimport { OmniBar, type CalendarAction } from \"./omni-bar\";\nimport {\n  type DayData,\n  type DotColor,\n  type CalendarData,\n  type ViewMode,\n  MONTH_NAMES,\n  MONTH_NAMES_SHORT,\n  getWeekStart,\n} from \"./calendar-types\";\n\nconst STORAGE_KEY = \"field-memo-data\";\n\n// Default dot color for legacy compatibility (dots are being phased out in favor of time blocks)\nconst DEFAULT_DOT_COLOR: DotColor = 1;\n\nfunction loadData(): CalendarData {\n  if (typeof window === \"undefined\") return {};\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    return stored ? JSON.parse(stored) : {};\n  } catch {\n    return {};\n  }\n}\n\nfunction saveData(data: CalendarData) {\n  if (typeof window === \"undefined\") return;\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\n  } catch {\n    // Storage full or unavailable\n  }\n}\n\nexport function YearCalendar() {\n  const today = new Date();\n  const [viewMode, setViewMode] = useState<ViewMode>(\"year\");\n  const [year, setYear] = useState(() => today.getFullYear());\n  const [month, setMonth] = useState(() => today.getMonth());\n  const [day, setDay] = useState(() => today.getDate());\n  const [data, setData] = useState<CalendarData>(() => loadData());\n\n  const handleDayUpdate = useCallback(\n    (month: number, day: number, dayData: DayData) => {\n      setData((prev) => {\n        const monthKey = `${year}-${month}`;\n        const newData = {\n          ...prev,\n          [monthKey]: {\n            ...prev[monthKey],\n            [`${day}`]: dayData,\n          },\n        };\n        saveData(newData);\n        return newData;\n      });\n    },\n    [year]\n  );\n\n  const months = Array.from({ length: 12 }, (_, i) => i);\n\n  // Navigation helpers\n  const navigatePrev = () => {\n    if (viewMode === \"year\") {\n      setYear((y) => y - 1);\n    } else if (viewMode === \"month\") {\n      if (month === 0) {\n        setMonth(11);\n        setYear((y) => y - 1);\n      } else {\n        setMonth((m) => m - 1);\n      }\n    } else if (viewMode === \"week\") {\n      const current = new Date(year, month, day);\n      current.setDate(current.getDate() - 7);\n      setYear(current.getFullYear());\n      setMonth(current.getMonth());\n      setDay(current.getDate());\n    } else if (viewMode === \"day\") {\n      const current = new Date(year, month, day);\n      current.setDate(current.getDate() - 1);\n      setYear(current.getFullYear());\n      setMonth(current.getMonth());\n      setDay(current.getDate());\n    }\n  };\n\n  const navigateNext = () => {\n    if (viewMode === \"year\") {\n      setYear((y) => y + 1);\n    } else if (viewMode === \"month\") {\n      if (month === 11) {\n        setMonth(0);\n        setYear((y) => y + 1);\n      } else {\n        setMonth((m) => m + 1);\n      }\n    } else if (viewMode === \"week\") {\n      const current = new Date(year, month, day);\n      current.setDate(current.getDate() + 7);\n      setYear(current.getFullYear());\n      setMonth(current.getMonth());\n      setDay(current.getDate());\n    } else if (viewMode === \"day\") {\n      const current = new Date(year, month, day);\n      current.setDate(current.getDate() + 1);\n      setYear(current.getFullYear());\n      setMonth(current.getMonth());\n      setDay(current.getDate());\n    }\n  };\n\n  const goToToday = () => {\n    const now = new Date();\n    setYear(now.getFullYear());\n    setMonth(now.getMonth());\n    setDay(now.getDate());\n  };\n\n  const getDateLabel = () => {\n    if (viewMode === \"year\") return `${year}`;\n    if (viewMode === \"month\") return `${MONTH_NAMES[month]} ${year}`;\n    if (viewMode === \"week\") {\n      const weekStart = getWeekStart(new Date(year, month, day));\n      const weekEnd = new Date(weekStart);\n      weekEnd.setDate(weekEnd.getDate() + 6);\n      const startMonth = MONTH_NAMES_SHORT[weekStart.getMonth()];\n      const endMonth = MONTH_NAMES_SHORT[weekEnd.getMonth()];\n      if (startMonth === endMonth) {\n        return `${startMonth} ${weekStart.getDate()}–${weekEnd.getDate()}, ${year}`;\n      }\n      return `${startMonth} ${weekStart.getDate()} – ${endMonth} ${weekEnd.getDate()}`;\n    }\n    return `${MONTH_NAMES[month]} ${day}, ${year}`;\n  };\n\n  const getData = (y: number, m: number, d: number): DayData => {\n    const monthKey = `${y}-${m}`;\n    return data[monthKey]?.[`${d}`] || { note: \"\", dots: [] };\n  };\n\n  const handleUpdate = (y: number, m: number, d: number, dayData: DayData) => {\n    setData((prev) => {\n      const monthKey = `${y}-${m}`;\n      const newData = {\n        ...prev,\n        [monthKey]: {\n          ...prev[monthKey],\n          [`${d}`]: dayData,\n        },\n      };\n      saveData(newData);\n      return newData;\n    });\n  };\n\n  const handleDayClick = (date: Date) => {\n    setYear(date.getFullYear());\n    setMonth(date.getMonth());\n    setDay(date.getDate());\n    setViewMode(\"day\");\n  };\n\n  const handleOmniAction = useCallback(\n    (action: CalendarAction) => {\n      switch (action.type) {\n        case \"navigate\":\n          if (action.payload.date) {\n            setYear(action.payload.date.getFullYear());\n            setMonth(action.payload.date.getMonth());\n            setDay(action.payload.date.getDate());\n          }\n          break;\n        case \"set_view\":\n          if (action.payload.view) {\n            setViewMode(action.payload.view);\n          }\n          break;\n        case \"add_note\":\n          if (action.payload.date && action.payload.note) {\n            const d = action.payload.date;\n            const y = d.getFullYear();\n            const m = d.getMonth();\n            const dayNum = d.getDate();\n            const existing = getData(y, m, dayNum);\n            handleUpdate(y, m, dayNum, {\n              ...existing,\n              note: action.payload.note,\n            });\n            // Navigate to the day\n            setYear(y);\n            setMonth(m);\n            setDay(dayNum);\n          }\n          break;\n        case \"add_dot\":\n          if (action.payload.date && action.payload.dotColor) {\n            const d = action.payload.date;\n            const y = d.getFullYear();\n            const m = d.getMonth();\n            const dayNum = d.getDate();\n            const existing = getData(y, m, dayNum);\n            const dots = [...existing.dots];\n            if (!dots.includes(action.payload.dotColor)) {\n              dots.push(action.payload.dotColor);\n            }\n            setData((prev) => {\n              const monthKey = `${y}-${m}`;\n              const newData = {\n                ...prev,\n                [monthKey]: {\n                  ...prev[monthKey],\n                  [`${dayNum}`]: { ...existing, dots },\n                },\n              };\n              saveData(newData);\n              return newData;\n            });\n          }\n          break;\n      }\n    },\n    [year, month, day, setData]\n  );\n\n  return (\n    <div className=\"h-screen w-screen flex flex-col overflow-hidden bg-background\">\n      {/* Header */}\n      <header className=\"flex-shrink-0 border-b border-border\">\n        <div className=\"px-2 sm:px-3 py-2 flex items-center justify-between gap-2\">\n          <div className=\"flex items-center gap-2 sm:gap-4 min-w-0\">\n            <h1 className=\"text-[8px] sm:text-[10px] font-medium tracking-widest uppercase text-muted-foreground flex-shrink-0\">\n              KAIR° <span className=\"hidden sm:inline\">(CAL)</span>\n            </h1>\n            \n            <ViewSwitcher view={viewMode} onViewChange={setViewMode} />\n            \n            <div className=\"flex items-center gap-0.5 sm:gap-1 min-w-0\">\n              <button\n                type=\"button\"\n                onClick={navigatePrev}\n                className=\"w-6 h-6 sm:w-5 sm:h-5 flex items-center justify-center text-muted-foreground hover:text-foreground transition-colors flex-shrink-0\"\n              >\n                <span className=\"text-xs\">&larr;</span>\n              </button>\n              <button\n                type=\"button\"\n                onClick={goToToday}\n                className=\"text-[9px] sm:text-[10px] font-medium tracking-wider text-foreground min-w-0 sm:min-w-[8rem] text-center hover:text-muted-foreground transition-colors truncate px-1\"\n              >\n                {getDateLabel()}\n              </button>\n              <button\n                type=\"button\"\n                onClick={navigateNext}\n                className=\"w-6 h-6 sm:w-5 sm:h-5 flex items-center justify-center text-muted-foreground hover:text-foreground transition-colors flex-shrink-0\"\n              >\n                <span className=\"text-xs\">&rarr;</span>\n              </button>\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-3 flex-shrink-0\">\n            <p className=\"text-[8px] text-muted-foreground hidden lg:block\">\n              Click to open day\n            </p>\n            <ThemeToggle />\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"flex-1 min-h-0 overflow-hidden\">\n        {viewMode === \"year\" && (\n          <div className=\"h-full grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 border-l border-t border-border overflow-y-auto\">\n            {months.map((m) => {\n              const monthKey = `${year}-${m}`;\n              const monthData = data[monthKey] || {};\n\n              return (\n                <MonthGrid\n                  key={m}\n                  month={m}\n                  year={year}\n                  data={monthData}\n                  onDayUpdate={(d, dayData) => handleDayUpdate(m, d, dayData)}\n                  selectedDotColor={DEFAULT_DOT_COLOR}\n                  onDayClick={(d) => handleDayClick(new Date(year, m, d))}\n                />\n              );\n            })}\n          </div>\n        )}\n\n        {viewMode === \"month\" && (\n          <MonthView\n            year={year}\n            month={month}\n            data={data}\n            onDayUpdate={handleDayUpdate}\n            selectedDotColor={DEFAULT_DOT_COLOR}\n            onDayClick={(d) => handleDayClick(new Date(year, month, d))}\n          />\n        )}\n\n        {viewMode === \"week\" && (\n          <WeekView\n            weekStart={getWeekStart(new Date(year, month, day))}\n            getData={getData}\n            onUpdate={handleUpdate}\n            selectedDotColor={DEFAULT_DOT_COLOR}\n            onDayClick={handleDayClick}\n          />\n        )}\n\n        {viewMode === \"day\" && (\n          <DayView\n            date={new Date(year, month, day)}\n            data={getData(year, month, day)}\n            onUpdate={(dayData) => handleUpdate(year, month, day, dayData)}\n          />\n        )}\n      </main>\n\n      {/* Floating Omni Bar */}\n      <OmniBar onAction={handleOmniAction} />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}